<div class="sheet-wrapper">
  <input checked="checked" name="attr_details_toggle" type="hidden" value="on">
  <input checked="checked" name="attr_edit_toggle" type="hidden" value="on">
  <div class="sheet-toggle">
    <div class="sheet-toggle-details">
      <label>
        <input type="checkbox" checked="checked" name="attr_details_toggle"><span>Detaljer</span>
      </label>
    </div>
    <div class="sheet-toggle-edit">
      <label>
        <input type="checkbox" checked="checked" name="attr_edit_toggle"><span>Editera</span>
      </label>
    </div>
  </div>
  <div>
    <ul>
      <li name="Karaktär">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Karaktär</h1>
        <ul class="sheet-testtab sheet-secondLevelTabs">
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Generellt</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-5colrow">
                <div class="sheet-col">
                  <table>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Spelledare</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_spelledare"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Spelare</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_spelare"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Namn</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_namn"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Ras</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_ras"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Kön</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_kon"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Socialt stånd</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_socialtStand"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Yrke</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_yrke"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Svärdshand</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_svardshand"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Ålder</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_alder"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Längd</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_langd"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Vikt</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_vikt"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Syn</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_syn"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Hörsel</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="text" name="attr_horsel"/></td>
                    </tr>
                  </table>
                </div>
                <div class="sheet-col">
                  <table>
                    <tr>
                      <th class="sheet-box_alternate2">Övrig information</th>
                    </tr>
                    <tr>
                      <td><textarea name="attr_ovriginfo" style="width: 600px; height: 220px"></textarea></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Grundegenskaper</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-5colrow">
                <div class="sheet-col">
                  <table>
                    <tr>
                      <td class="sheet-box_alternate"><span>Namn</span></td>
                      <td class="sheet-box_alternate"><span>FV</span></td>
                      <td class="sheet-box_alternate"><span>Mod.</span></td>
                      <td class="sheet-box_alternate"><span>Tot.</span></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Styrka (STY)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_sty"    value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_styMod" value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_styTot" value="0" readonly="true" /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_styr"   value="&{template:combined} {{name=Styrka}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sty}+@{styMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Fysik (FYS)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_fys"    value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_fysMod" value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_fysTot" value="0" readonly="true" /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_fysr"   value="&{template:combined} {{name=Fysik}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{fys}+@{fysMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Smidighet (SMI)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_smi"    value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_smiMod" value="0"                 /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_smiTot" value="0" readonly="true" /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_smir"   value="&{template:combined} {{name=Smidighet}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{smi}+@{smiMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Intelligens (INT)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_int"    value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_intMod" value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_intTot" value="0" readonly="true"  /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_intr"   value="&{template:combined} {{name=Intelligens}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{int}+@{intMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Psyke (PSY)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_psy"    value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_psyMod" value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_psyTot" value="0" readonly="true"  /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_psyr"   value="&{template:combined} {{name=Psyke}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{psy}+@{psyMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Karisma (KAR)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_kar"    value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_karMod" value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_karTot" value="0" readonly="true"  /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_karr"   value="&{template:combined} {{name=Karisma}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{kar}+@{karMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                    <tr>
                      <td         class="sheet-box_alternate_row"><span>Storlek (STO)</span></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_sto"    value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_stoMod" value="0"                  /></td>
                      <td><input  class="sheet-fardighetstabell"  type="number" name="attr_stoTot" value="0" readonly="true"  /></td>
                      <td><button class="sheet-tarningstabell"    type="roll"   name="roll_stor"   value="&{template:combined} {{name=Storlek}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sto}+@{stoMod}+?{Modifikation|0}]]}}"></button></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Särskilda förmågor</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td class="sheet-box_alternate"><span>Namn</span></td>
                    <td class="sheet-box_alternate"><span>Beskrivning</span></td>
                  </tr>
                  <tr>
                    <td><input type="text" name="attr_sarskildNamn_display" class="sheet-fardighetstabell"/></td>
                    <td><input type="text" name="attr_sarskildDesc_display" class="sheet-fardighetstabell"/></td>
                  </tr>
                </table>
                <fieldset class="repeating_sarskild">
                  <table>
                    <tr>
                      <td><input type="text" name="attr_sarskildNamn" class="sheet-fardighetstabell"/></td>
                      <td><input type="text" name="attr_sarskildDesc" class="sheet-fardighetstabell"/></td>
                    </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Stats</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-5colrow">
                <div class="sheet-col">
                  <table>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Hjältepoäng</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="number" name="attr_hjaltePoang" value="0"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Äventyrspoäng</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="number" name="attr_aventyrsPoang" value="0"/></td>
                    </tr>
                    <tr>
                      <td class="sheet-box_alternate_row"><span>Total ÄP</span></td>
                      <td><input class="sheet-fardighetstabell_half" type="number" name="attr_totalAventyrsPoang" value="0"/></td>
                    </tr>
                  </table>
                </div>
              </div>
            </div>
          </li>
        </ul>
      </li>
      <li name="Karaktär">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Karaktär</h1>
        <div class="sheet-section sheet-grid sheet-characterdata-grid">
          <div class="sheet-characterdata-grid-general">
            <h2 class="sheet-grid-section-header">Generellt</h2>
            <div class="sheet-general sheet-table-header">
              <div class="sheet-table-header-field sheet-general-name">Namn</div>
              <div class="sheet-table-header-field sheet-general-value">Värde</div>
            </div>
            <div class="sheet-general-pair sheet-general-gm">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Spelledare</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_gm"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Spelledare</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_gm"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-playerName">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Spelare</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_playerName"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Spelare</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_playerName"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterName">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Namn</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterName"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Namn</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterName"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterAlignment">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Alignment</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterAlignment"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Alignment</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterAlignment"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterRace">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Ras</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterRace"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Ras</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterRace"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterSex">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Kön</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterSex"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Kön</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterSex"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterSocial">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Socialt stånd</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterSocial"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Socialt stånd</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterSocial"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterProfession">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Yrke</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterProfession"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Yrke</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterProfession"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterHandedness">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Svärdshand</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterHandedness"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Svärdshand</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterHandedness"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterAge">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Ålder</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterAge"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Ålder</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterAge"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterHeight">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Längd</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterHeight"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Längd</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterHeight"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterWeight">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Vikt</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterWeight"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Vikt</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterWeight"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterSight">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Syn</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterSight"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Syn</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterSight"></span>
              </div>
            </div>
            <div class="sheet-general-pair sheet-general-characterHearing">
              <div class="sheet-general sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Hörsel</strong>
                <input  class="sheet-table-row-field sheet-general-value" type="text" value="" name="attr_characterHearing"/>
              </div>
              <div class="sheet-general sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-general-name">Hörsel</strong>
                <span   class="sheet-table-row-field sheet-general-value" name="attr_characterHearing"></span>
              </div>
            </div>
          </div>
          <div class="sheet-characterdata-grid-attribute">
            <h2 class="sheet-grid-section-header">Attribut</h2>
            <div class="sheet-attribute sheet-table-header sheet-show-while-edit">
              <div class="sheet-table-header-field sheet-attribute-name">Namn</div>
              <div class="sheet-table-header-field sheet-attribute-mod">Mod</div>
              <div class="sheet-table-header-field sheet-attribute-fv">FV</div>
              <div class="sheet-table-header-field sheet-attribute-totFv">FV</div>
            </div>
            <div class="sheet-attribute sheet-table-header sheet-hide-while-edit">
              <div class="sheet-table-header-field sheet-attribute-name">Namn</div>
              <div class="sheet-table-header-field sheet-attribute-mod">Mod</div>
              <div class="sheet-table-header-field sheet-attribute-fv">FV</div>
              <div class="sheet-table-header-field sheet-attribute-totFv">FV</div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-strength">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Styrka (STY)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_styMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_sty"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_styTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_styr" value="&{template:combined} {{name=Styrka}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sty}+@{styMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Styrka (STY)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_styMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_sty">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_styTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-endurance">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Fysik (FYS)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_fysMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_fys"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_fysTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_fysr" value="&{template:combined} {{name=Fysik}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{fys}+@{fysMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Fysik (FYS)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_fysMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_fys">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_fysTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-agility">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Smidighet (SMI)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_smiMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_smi"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_smiTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_smir" value="&{template:combined} {{name=Smidighet}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{smi}+@{smiMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Smidighet (SMI)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_smiMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_smi">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_smiTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-intelligence">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Intelligens (INT)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_intMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_int"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_intTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_intr" value="&{template:combined} {{name=Intelligens}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{int}+@{intMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Intelligens (INT)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_intMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_int">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_intTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-willpower">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Psyke (PSY)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_psyMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_psy"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_psyTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_psyr" value="&{template:combined} {{name=Psyke}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{psy}+@{psyMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Psyke (PSY)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_psyMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_psy">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_psyTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-charisma">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Karisma (KAR)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_karMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_kar"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_karTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_karr" value="&{template:combined} {{name=Karisma}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{kar}+@{karMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Karisma (KAR)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_karMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_kar">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_karTot">0</span>
              </div>
            </div>
            <div class="sheet-attribute-pair sheet-attribute-size">
              <div class="sheet-attribute sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-attribute-name">Storlek (STO)</strong>
                <input  class="sheet-table-row-field sheet-attribute-mod"   type="number" value="0" name="attr_stoMod"/>
                <input  class="sheet-table-row-field sheet-attribute-fv"    type="number" value="0" name="attr_sto"/>
                <input  class="sheet-table-row-field sheet-attribute-totFv" type="number" value="0" name="attr_stoTot"/>
              </div>
              <div class="sheet-attribute sheet-table-row sheet-hide-while-edit">
                <button class="sheet-button-full-hidden" type="roll"   name="roll_stor" value="&{template:combined} {{name=Storlek}}  {{vad=Egenskap}} ?{Slagtyp|Summa, {{typ=Grundegenskap&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Grundegenskap - Mot&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sto}+@{stoMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-attribute-name"  >Storlek (STO)</strong>
                <span   class="sheet-table-row-field sheet-attribute-mod"   name="attr_stoMod">0</span>
                <span   class="sheet-table-row-field sheet-attribute-fv"    name="attr_sto">0</span>
                <span   class="sheet-table-row-field sheet-attribute-totFv" name="attr_stoTot">0</span>
              </div>
            </div>
          </div>
          <div class="sheet-characterdata-grid-derived">
            <h2 class="sheet-grid-section-header">Beräknade</h2>
            <div class="sheet-derived sheet-table-header sheet-show-while-edit">
              <div class="sheet-table-header-field sheet-derived-name">Namn</div>
              <div class="sheet-table-header-field sheet-derived-mod">Mod</div>
              <div class="sheet-table-header-field sheet-derived-value">Värde</div>
              <div class="sheet-table-header-field sheet-derived-totValue">Värde</div>
            </div>
            <div class="sheet-derived sheet-table-header sheet-hide-while-edit">
              <div class="sheet-table-header-field sheet-derived-name">Namn</div>
              <div class="sheet-table-header-field sheet-derived-mod">Mod</div>
              <div class="sheet-table-header-field sheet-derived-value">Värde</div>
              <div class="sheet-table-header-field sheet-derived-totValue">Värde</div>
            </div>
            <div class="sheet-derived-pair sheet-derived-damageBonus">
              <div class="sheet-derived sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Skadebonus</strong>
                <input  class="sheet-table-row-field sheet-derived-mod"      type="text" name="attr_skadeBonusMod" value="" />
                <input  class="sheet-table-row-field sheet-derived-value"    type="text" name="attr_skadeBonus"    value="" />
                <input  class="sheet-table-row-field sheet-derived-totValue" type="text" name="attr_skadeBonusTot" value=""/>
              </div>
              <div class="sheet-derived sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Skadebonus</strong>
                <span   class="sheet-table-row-field sheet-derived-mod"      name="attr_skadeBonusMod"></span>
                <span   class="sheet-table-row-field sheet-derived-value"    name="attr_skadeBonus"   ></span>
                <span   class="sheet-table-row-field sheet-derived-totValue" name="attr_skadeBonusTot"></span>
              </div>
            </div>
            <div class="sheet-derived-pair sheet-derived-hitPoints">
              <div class="sheet-derived sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Kroppspoäng max</strong>
                <input  class="sheet-table-row-field sheet-derived-mod"      type="number" name="attr_kroppsPoangMod" value="0"/>
                <span   class="sheet-table-row-field sheet-derived-value"    type="number" name="attr_kroppsPoang"    >0</span>
                <span   class="sheet-table-row-field sheet-derived-totValue" type="number" name="attr_kp_max"         >0</span>
              </div>
              <div class="sheet-derived sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Kroppspoäng max</strong>
                <span  class="sheet-table-row-field sheet-derived-mod"      type="number" name="attr_kroppsPoangMod" >0</span>
                <span  class="sheet-table-row-field sheet-derived-value"    type="number" name="attr_kroppsPoang"    >0</span>
                <span  class="sheet-table-row-field sheet-derived-totValue" type="number" name="attr_kp_max"         >0</span>
              </div>
            </div>
            <div class="sheet-derived-pair sheet-derived-manaPoints">
              <div class="sheet-derived sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Psykepoäng max</strong>
                <input  class="sheet-table-row-field sheet-derived-mod"      type="number" value="0" name="attr_psykePoangMod"/>
                <span   class="sheet-table-row-field sheet-derived-value"    type="number" value="0" name="attr_psykePoangGrund">0</span>
                <span   class="sheet-table-row-field sheet-derived-totValue" type="number" value="0" name="attr_psykePoang_max">0</span>
              </div>
              <div class="sheet-derived sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Psykepoäng max</strong>
                <span   class="sheet-table-row-field sheet-derived-mod"      name="attr_psykePoangMod">0</span>
                <span   class="sheet-table-row-field sheet-derived-value"    name="attr_psykePoangGrund">0</span>
                <span   class="sheet-table-row-field sheet-derived-totValue" name="attr_psykePoang_max">0</span>
              </div>
            </div>
            <div class="sheet-derived-pair sheet-derived-speed">
              <div class="sheet-derived sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Förflyttning</strong>
                <input  class="sheet-table-row-field sheet-derived-mod"      type="number" value="0" name="attr_speedMod"/>
                <span   class="sheet-table-row-field sheet-derived-value"    type="number" value="0" name="attr_speed">0</span>
                <span   class="sheet-table-row-field sheet-derived-totValue" type="number" value="0" name="attr_speedTot">0</span>
              </div>
              <div class="sheet-derived sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-derived-name">Förflyttning</strong>
                <span   class="sheet-table-row-field sheet-derived-mod"      name="attr_speedMod">0</span>
                <span   class="sheet-table-row-field sheet-derived-value"    name="attr_speed">0</span>
                <span   class="sheet-table-row-field sheet-derived-totValue" name="attr_speedTot">0</span>
              </div>
            </div>
          </div>
          <div class="sheet-characterdata-grid-experience">
            <h2 class="sheet-grid-section-header">Erfarenhet</h2>
            <div class="sheet-experience sheet-table-header sheet-show-while-edit">
              <div class="sheet-table-header-field sheet-experience-name">Namn</div>
              <div class="sheet-table-header-field sheet-experience-unused">Nya</div>
              <div class="sheet-table-header-field sheet-experience-total">Totalt</div>
            </div>
            <div class="sheet-experience sheet-table-header sheet-hide-while-edit">
              <div class="sheet-table-header-field sheet-experience-name">Namn</div>
              <div class="sheet-table-header-field sheet-experience-unused">Nya</div>
              <div class="sheet-table-header-field sheet-experience-total">Totalt</div>
            </div>
            <div class="sheet-experience-pair sheet-experience-heroPoints">
              <div class="sheet-experience sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-experience-name">Hjältepoäng</strong>
                <input  class="sheet-table-row-field sheet-experience-unused"   type="number" value="0" name="attr_heroPoints_unused"/>
                <input  class="sheet-table-row-field sheet-experience-total"    type="number" value="0" name="attr_heroPoints_total"/>
              </div>
              <div class="sheet-experience sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-experience-name">Hjältepoäng</strong>
                <span   class="sheet-table-row-field sheet-experience-unused"   name="attr_heroPoints_unused">0</span>
                <span   class="sheet-table-row-field sheet-experience-total"    name="attr_heroPoints_total">0</span>
              </div>
            </div>
            <div class="sheet-experience-pair sheet-experience-experiencePoints">
              <div class="sheet-experience sheet-table-row sheet-show-while-edit">
                <strong class="sheet-table-row-field sheet-experience-name">Äventyrspoäng</strong>
                <input  class="sheet-table-row-field sheet-experience-unused"   type="number" value="0" name="attr_experiencePoints_unused"/>
                <input  class="sheet-table-row-field sheet-experience-total"    type="number" value="0" name="attr_experiencePoints_total"/>
              </div>
              <div class="sheet-experience sheet-table-row sheet-hide-while-edit">
                <strong class="sheet-table-row-field sheet-experience-name">Äventyrspoäng</strong>
                <span   class="sheet-table-row-field sheet-experience-unused"   name="attr_experiencePoints_unused">0</span>
                <span   class="sheet-table-row-field sheet-experience-total"    name="attr_experiencePoints_total">0</span>
              </div>
            </div>
          </div>
          <div class="sheet-characterdata-grid-ability">
            <h2 class="sheet-grid-section-header">Förmågor</h2>
            <div class="sheet-ability sheet-table-header sheet-show-while-edit">
              <div class="sheet-table-header-field sheet-ability-name">Namn</div>
              <div class="sheet-table-header-field sheet-ability-desc">Beskrivning</div>
            </div>
            <div class="sheet-ability sheet-table-header sheet-hide-while-edit">
              <div class="sheet-table-header-field sheet-ability-name">Namn</div>
              <div class="sheet-table-header-field sheet-ability-desc">Beskrivning</div>
            </div>
            <fieldset class="repeating_ability">
              <div class="sheet-ability-pair sheet-characterdata-ability">
                <div class="sheet-ability sheet-table-row sheet-show-while-edit">
                  <input class="sheet-table-row-field sheet-ability-name" type="text" name="attr_abilityName"/>
                  <input class="sheet-table-row-field sheet-ability-desc" type="text" name="attr_abilityDesc"/>
                </div>
                <div class="sheet-ability sheet-table-row sheet-hide-while-edit">
                  <span   class="sheet-table-row-field sheet-ability-name"  name="attr_abilityName"></span>
                  <span   class="sheet-table-row-field sheet-ability-desc"  name="attr_abilityDesc"></span>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="sheet-characterdata-grid-extra">
            <h2 class="sheet-grid-section-header">Övrigt</h2>
            <div class="sheet-extra">
              <textarea name="attr_ovriginfo" style="height: 100px"></textarea>
            </div>
          </div>
        </div>
      </li>
      <li name="Färdigheter">
        <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-skill-tab" checked/>
        <h1>Färdigheter</h1>
        <div class="sheet-section sheet-grid sheet-skill-grid">
          <div class="sheet-skill-grid-primary">
            <h2 class="sheet-grid-section-header">Primära (2)</h2>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-show">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-hide">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <div class="sheet-skill-pair sheet-skill-bluffa">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Bluffa</strong>
                <div class="sheet-table-row-field sheet-skill-base">  KAR</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_bluffaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_bluffaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_bluffa"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_bluffa" value="&{template:combined} {{name=Bluffa}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{bluffa}+@{bluffaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Bluffa</strong>
                <span class="sheet-table-row-field sheet-skill-base"> KAR</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_bluffaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_bluffaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_bluffa">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_bluffaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-finnaDoldaTing">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Finna dolda ting</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_finnaDoldaTingErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_finnaDoldaTingMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_finnaDoldaTing"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_finnaDoldaTing" value="&{template:combined} {{name=Finna dolda ting}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{finnaDoldaTing}+@{finnaDoldaTingMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Finna dolda ting</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_finnaDoldaTingErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_finnaDoldaTingMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_finnaDoldaTing">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_finnaDoldaTingTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-forstaHjalpen">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Första hjälpen</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_forstaHjalpenErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_forstaHjalpenMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_forstaHjalpen"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_forstaHjalpen" value="&{template:combined} {{name=Första hjälpen}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{forstaHjalpen}+@{forstaHjalpenMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Första hjälpen</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_forstaHjalpenErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_forstaHjalpenMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_forstaHjalpen">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_forstaHjalpenTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-gommaSig">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Gömma sig</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_gommaSigErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_gommaSigMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_gommaSig"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_gommaSig" value="&{template:combined} {{name=Gömma sig}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{gommaSig}+@{gommaSigMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Gömma sig</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_gommaSigErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_gommaSigMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_gommaSig">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_gommaSigTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-hoppa">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Hoppa</strong>
                <div class="sheet-table-row-field sheet-skill-base">  SMI</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_hoppaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_hoppaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_hoppa"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_hoppa" value="&{template:combined} {{name=Hoppa}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{hoppa}+@{hoppaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Hoppa</strong>
                <span class="sheet-table-row-field sheet-skill-base"> SMI</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_hoppaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_hoppaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_hoppa">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_hoppaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-klattra">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Klättra</strong>
                <div class="sheet-table-row-field sheet-skill-base">  SMI</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_klattraErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_klattraMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_klattra"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_klattra" value="&{template:combined} {{name=Klättra}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{klattra}+@{klattraMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Klättra</strong>
                <span class="sheet-table-row-field sheet-skill-base"> SMI</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_klattraErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_klattraMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_klattra">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_klattraTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-kopsla">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Köpslå</strong>
                <div class="sheet-table-row-field sheet-skill-base">  KAR</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_kopslaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_kopslaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_kopsla"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_kopsla" value="&{template:combined} {{name=Köpslå}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{kopsla}+@{kopslaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Köpslå</strong>
                <span class="sheet-table-row-field sheet-skill-base"> KAR</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_kopslaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_kopslaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_kopsla">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_kopslaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-lyssna">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Lyssna</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_lyssnaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_lyssnaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_lyssna"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_lyssna" value="&{template:combined} {{name=Lyssna}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{lyssna}+@{lyssnaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Lyssna</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_lyssnaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_lyssnaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_lyssna">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_lyssnaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-lsModersmalMod">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">L/S modersmål</strong>
                <div class="sheet-table-row-field sheet-skill-base">  spec</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_lsModersmalModErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_lsModersmalModMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_lsModersmalMod"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_lsModersmalMod" value="&{template:combined} {{name=L/S modersmål}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{lsModersmalMod}+@{lsModersmalModMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">L/S modersmål</strong>
                <span class="sheet-table-row-field sheet-skill-base"> spec</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_lsModersmalModErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_lsModersmalModMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_lsModersmalMod">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_lsModersmalModTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-rida">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Rida</strong>
                <div class="sheet-table-row-field sheet-skill-base">  SMI</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_ridaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_ridaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_rida"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_rida" value="&{template:combined} {{name=Rida}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{rida}+@{ridaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Rida</strong>
                <span class="sheet-table-row-field sheet-skill-base"> SMI</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_ridaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_ridaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_rida">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_ridaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-sjunga">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Sjunga</strong>
                <div class="sheet-table-row-field sheet-skill-base">  KAR</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_sjungaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_sjungaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_sjunga"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_sjunga" value="&{template:combined} {{name=Sjunga}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sjunga}+@{sjungaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Sjunga</strong>
                <span class="sheet-table-row-field sheet-skill-base"> KAR</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_sjungaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_sjungaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_sjunga">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_sjungaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-slagsmal">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Slagsmål</strong>
                <div class="sheet-table-row-field sheet-skill-base">  STY</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_slagsmalErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_slagsmalMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_slagsmal"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_slagsmal" value="&{template:combined} {{name=Slagsmål}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{slagsmal}+@{slagsmalMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Slagsmål</strong>
                <span class="sheet-table-row-field sheet-skill-base"> STY</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_slagsmalErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_slagsmalMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_slagsmal">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_slagsmalTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-smyga">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Smyga</strong>
                <div class="sheet-table-row-field sheet-skill-base">  SMI</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_smygaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_smygaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_smyga"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_smyga" value="&{template:combined} {{name=Smyga}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{smyga}+@{smygaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Smyga</strong>
                <span class="sheet-table-row-field sheet-skill-base"> SMI</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_smygaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_smygaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_smyga">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_smygaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-spara">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Spåra</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_sparaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_sparaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_spara"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_spara" value="&{template:combined} {{name=Spåra}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{spara}+@{sparaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Spåra</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_sparaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_sparaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_spara">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_sparaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-stjalaForemal">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Stjäla föremål</strong>
                <div class="sheet-table-row-field sheet-skill-base">  SMI</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_stjalaForemalErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_stjalaForemalMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_stjalaForemal"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_stjalaForemal" value="&{template:combined} {{name=Stjäla föremål}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{stjalaForemal}+@{stjalaForemalMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Stjäla föremål</strong>
                <span class="sheet-table-row-field sheet-skill-base"> SMI</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_stjalaForemalErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_stjalaForemalMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_stjalaForemal">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_stjalaForemalTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-talaModersmal">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Tala modersmål</strong>
                <div class="sheet-table-row-field sheet-skill-base">  spec</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_talaModersmalErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_talaModersmalMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_talaModersmal"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_talaModersmal" value="&{template:combined} {{name=Tala modersmål}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{talaModersmal}+@{talaModersmalMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Tala modersmål</strong>
                <span class="sheet-table-row-field sheet-skill-base"> spec</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_talaModersmalErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_talaModersmalMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_talaModersmal">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_talaModersmalTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-upptackaFara">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Upptäcka fara</strong>
                <div class="sheet-table-row-field sheet-skill-base">  PSY</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_upptackaFaraErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_upptackaFaraMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_upptackaFara"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_upptackaFara" value="&{template:combined} {{name=Upptäcka fara}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{upptackaFara}+@{upptackaFaraMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Upptäcka fara</strong>
                <span class="sheet-table-row-field sheet-skill-base"> PSY</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_upptackaFaraErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_upptackaFaraMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_upptackaFara">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_upptackaFaraTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-vardera">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Värdera</strong>
                <div class="sheet-table-row-field sheet-skill-base">  INT</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_varderaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_varderaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_vardera"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_vardera" value="&{template:combined} {{name=Värdera}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{vardera}+@{varderaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Värdera</strong>
                <span class="sheet-table-row-field sheet-skill-base"> INT</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_varderaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_varderaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_vardera">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_varderaTotFv">0</span>
              </div>
            </div>
            <div class="sheet-skill-pair sheet-skill-overtala">
              <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                <strong class="sheet-table-row-field sheet-skill-name">Övertala</strong>
                <div class="sheet-table-row-field sheet-skill-base">  KAR</div>
                <input class="sheet-table-row-field sheet-skill-erf"  type="number" value="0" name="attr_overtalaErf"/>
                <input class="sheet-table-row-field sheet-skill-mod"  type="number" value="0" name="attr_overtalaMod"/>
                <input class="sheet-table-row-field sheet-skill-fv"   type="number" value="0" name="attr_overtala"/>
              </div>
              <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                <button type="roll" class="sheet-button-full-hidden" name="roll_overtala" value="&{template:combined} {{name=Övertala}} {{vad=Primär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{overtala}+@{overtalaMod}+?{Modifikation|0}]]}}"></button>
                <strong class="sheet-table-row-field sheet-skill-name">Övertala</strong>
                <span class="sheet-table-row-field sheet-skill-base"> KAR</span>
                <span class="sheet-table-row-field sheet-skill-erf"   name="attr_overtalaErf">0</span>
                <span class="sheet-table-row-field sheet-skill-mod"   name="attr_overtalaMod">0</span>
                <span class="sheet-table-row-field sheet-skill-fv"    name="attr_overtala">0</span>
                <span class="sheet-table-row-field sheet-skill-totFv" name="attr_overtalaTotFv">0</span>
              </div>
            </div>
          </div>
          <div class="sheet-skill-grid-profession">
            <h2 class="sheet-grid-section-header">Yrkes (3)</h2>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-show">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-hide">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <fieldset class="repeating_yrkes">
              <div class="sheet-skill-pair sheet-skill-yrkes">
                <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                  <input class="sheet-table-row-field sheet-skill-name" type="text"   name="attr_yrkesnamn"/>
                  <input class="sheet-table-row-field sheet-skill-base" type="text"   name="attr_yrkesbas"/>
                  <input class="sheet-table-row-field sheet-skill-erf"  type="number" name="attr_yrkeserf" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-mod"  type="number" name="attr_yrkesMod" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-fv"   type="number" name="attr_yrkesfv"  value="0"/>
                </div>
                <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                  <button type="roll" name="roll_yrkes" class="sheet-button-full-hidden"   value="&{template:combined} {{name=@{yrkesnamn}}} {{vad=Yrkes}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{yrkesfv}+@{yrkesMod}+?{Modifikation|0}]]}}"></button>
                  <span   class="sheet-table-row-field sheet-skill-name"  name="attr_yrkesnamn"  ></span>
                  <span   class="sheet-table-row-field sheet-skill-base"  name="attr_yrkesbas"   ></span>
                  <span   class="sheet-table-row-field sheet-skill-erf"   name="attr_yrkeserf"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-mod"   name="attr_yrkesMod"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-fv"    name="attr_yrkesfv"    >0</span>
                  <span   class="sheet-table-row-field sheet-skill-totFv" name="attr_yrkestotfv" >0</span>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="sheet-skill-grid-secondary">
            <h2 class="sheet-grid-section-header">Sekundära (4)</h2>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-show">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-hide">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <fieldset class="repeating_sekundar">
              <div class="sheet-skill-pair sheet-skill-sekundar">
                <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                  <input class="sheet-table-row-field sheet-skill-name" type="text"   name="attr_sekundarnamn"/>
                  <input class="sheet-table-row-field sheet-skill-base" type="text"   name="attr_sekundarbas"/>
                  <input class="sheet-table-row-field sheet-skill-erf"  type="number" name="attr_sekundarerf" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-mod"  type="number" name="attr_sekundarMod" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-fv"   type="number" name="attr_sekundarfv"  value="0"/>
                </div>
                <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                  <button type="roll" name="roll_sekundar" class="sheet-button-full-hidden"   value="&{template:combined} {{name=@{sekundarnamn}}} {{vad=Sekundär}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sekundarfv}+@{sekundarMod}+?{Modifikation|0}]]}}"></button>
                  <span   class="sheet-table-row-field sheet-skill-name"  name="attr_sekundarnamn"  ></span>
                  <span   class="sheet-table-row-field sheet-skill-base"  name="attr_sekundarbas"   ></span>
                  <span   class="sheet-table-row-field sheet-skill-erf"   name="attr_sekundarerf"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-mod"   name="attr_sekundarMod"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-fv"    name="attr_sekundarfv"    >0</span>
                  <span   class="sheet-table-row-field sheet-skill-totFv" name="attr_sekundartotfv" >0</span>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="sheet-skill-grid-language">
            <h2 class="sheet-grid-section-header">Språk (3)</h2>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-show">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <div class="sheet-skill sheet-table-header sheet-skill-edit-hide">
              <div class="sheet-table-header-field sheet-skill-name">Namn</div>
              <div class="sheet-table-header-field sheet-skill-base">Bas</div>
              <div class="sheet-table-header-field sheet-skill-erf">Erf</div>
              <div class="sheet-table-header-field sheet-skill-mod">Mod</div>
              <div class="sheet-table-header-field sheet-skill-fv">FV</div>
              <div class="sheet-table-header-field sheet-skill-totFv">FV</div>
            </div>
            <fieldset class="repeating_sprak">
              <div class="sheet-skill-pair sheet-skill-sprak">
                <div class="sheet-skill sheet-table-row sheet-skill-edit-show">
                  <input class="sheet-table-row-field sheet-skill-name" type="text"   name="attr_spraknamn"/>
                  <input class="sheet-table-row-field sheet-skill-base" type="text"   name="attr_sprakbas"/>
                  <input class="sheet-table-row-field sheet-skill-erf"  type="number" name="attr_sprakerf" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-mod"  type="number" name="attr_sprakMod" value="0"/>
                  <input class="sheet-table-row-field sheet-skill-fv"   type="number" name="attr_sprakfv"  value="0"/>
                </div>
                <div class="sheet-skill sheet-table-row sheet-skill-edit-hide">
                  <button type="roll" name="roll_sprak" class="sheet-button-full-hidden"   value="&{template:combined} {{name=@{spraknamn}}} {{vad=Språk}} ?{Slagtyp|Summa, {{typ=Färdighet&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Färdighet - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20+@{sprakfv}+@{sprakMod}+?{Modifikation|0}]]}}"></button>
                  <span   class="sheet-table-row-field sheet-skill-name"  name="attr_spraknamn"  ></span>
                  <span   class="sheet-table-row-field sheet-skill-base"  name="attr_sprakbas"   ></span>
                  <span   class="sheet-table-row-field sheet-skill-erf"   name="attr_sprakerf"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-mod"   name="attr_sprakMod"   >0</span>
                  <span   class="sheet-table-row-field sheet-skill-fv"    name="attr_sprakfv"    >0</span>
                  <span   class="sheet-table-row-field sheet-skill-totFv" name="attr_spraktotfv" >0</span>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </li>
      <li name="Magi">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Magi</h1>
        <ul class="sheet-testtab sheet-secondLevelTabs">
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Besvärjelser</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-normal"  value="Namn"        /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-normal"  value="Beskrivning" /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="Kost."       /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="Mod.."       /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="K."          /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="I"           /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="T"           /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="erf"         /></td>
                    <td><input type="text" disabled="true" class="sheet-table-header-text sheet-text-width-slim"    value="FV"          /></td>
                  </tr>
                </table>
                <fieldset class="repeating_magi">
                  <table>
                    <tr>
                      <td><input  type="text"   name="attr_maginamn"          class="sheet-fardighetstabell"          /></td>
                      <td><input  type="text"   name="attr_magidesc_display"  class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magikost"          class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magimod"           class="sheet-fardighetstabell" value="0"/></td>
                      <td><input  type="number" name="attr_magiK_display"     class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magiI"             class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magiT"             class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magierf"           class="sheet-fardighetstabell"          /></td>
                      <td><input  type="number" name="attr_magifv"            class="sheet-fardighetstabell"          /></td>
                      <td><button type="roll"   name="roll_magi" value="&{template:combined} {{name=@{maginamn}}} {{effekt=?{E|1}}} {{vad=Formel}} ?{Slagtyp|Summa, {{typ=Magi&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Magi - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20-?{E}+@{magifv}+@{magimod}+?{Modifikation|0}]]}}" class="sheet-tarningstabell"></button></td>
                    </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Psykepoäng</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td class="sheet-box_alternate"><span>Grund</span></td>
                    <td class="sheet-box_alternate"><span>Mod.</span></td>
                    <td class="sheet-box_alternate"><span>Psy Max</span></td>
                    <td class="sheet-box_alternate"><span>Använda</span></td>
                    <td class="sheet-box_alternate"><span>Psy kvar</span>
                    </td>
                  </tr>
                  <tr>
                    <td><input type="number" name="attr_psykePoangGrund"      class="sheet-fardighetstabell"              value=""                                                          readonly="true" /></td>
                    <td><input type="number" name="attr_psykePoangMod"        class="sheet-fardighetstabell"              value="0"                                                                         /></td>
                    <td><input type="number" name="attr_psykePoang_max"       class="sheet-fardighetstabell_number_wide"  value=""                                                          readonly="true" /></td>
                    <td><input type="number" name="attr_psykePoangForbrukade" class="sheet-fardighetstabell_number_wide"  value="0"                                                                         /></td>
                    <td><input type="text"   name="attr_psykePoang"           class="sheet-fardighetstabell"              value="0"  readonly="true" /></td>
                  </tr>
                </table>
                <tr>
                  <td><textarea class="sheet-textarea_wide" style="Width: 400px" name="attr_psykePoang_notes"></textarea></td>
                </tr>
              </div>
            </div>
          </li>
        </ul>
      </li>
      <li name="Magi2">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Magi</h1>
        <div class="sheet-section sheet-grid sheet-magic-grid">
          <div class="sheet-magic-grid-spells">
            <h2 class="sheet-grid-section-header">Besvärjelser</h2>
            <div class="sheet-spell sheet-table sheet-header sheet-row sheet-show-while-edit">
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-name">Namn</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-desc">Beskrivning</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-cost">Kostnad</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-quick">Kvick</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-still">Stilla</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-silent">Tyst</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-perfectRolls">Erf</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-fv">FV</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-fv-mod">Mod</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-total">FV</div>
            </div>
            <div class="sheet-spell sheet-table sheet-header sheet-row sheet-hide-while-edit">
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-name">Namn</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-desc">Beskrivning</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-cost">Kostnad</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-quick">Kvick</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-still">Stilla</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-silent">Tyst</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-perfectRolls">Erf</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-fv">FV</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-fv-mod">Mod</div>
              <div class="sheet-spell sheet-table sheet-header sheet-field sheet-fv-total">FV</div>
            </div>
            <fieldset class="repeating_spells">
              <div class="sheet-pair">
                <div class="sheet-spell sheet-table sheet-row sheet-show-while-edit">
                  <input class="sheet-spell sheet-table sheet-field sheet-name"     type="text"   name="attr_spell_name"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-desc"     type="text"   name="attr_spell_desc"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-cost"     type="number" name="attr_spell_cost"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-quick"    type="number" name="attr_spell_quick"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-still"    type="number" name="attr_spell_still"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-silent"   type="number" name="attr_spell_silent"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-perfects" type="number" name="attr_spell_perfects"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-fv"       type="number" name="attr_spell_cost"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-fv-mod"   type="number" name="attr_spell_cost"/>
                  <input class="sheet-spell sheet-table sheet-field sheet-fv-total" type="number" name="attr_spell_cost"/>
                </div>
                <div class="sheet-spell sheet-table sheet-row sheet-hide-while-edit">
                  <button type="roll" name="roll_spell" class="sheet-button-full-hidden" value="&{template:combined} {{name=@{spell_name}}} {{effekt=?{E|1}}} {{vad=Besvärjelse}} ?{Slagtyp|Summa, {{typ=Magi&amp;#125;&amp;#125; {{slag=[[ |Motstånd, {{typ=Magi - Motstånd&amp;#125;&amp;#125; {{slag=[[ -1* }1d20-?{E}+1+@{spell_fv_total}+?{Modifikation|0}]]}}"></button>
                  <span class="sheet-spell sheet-table sheet-field sheet-name"     name="attr_spell_name">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-desc"     name="attr_spell_desc">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-cost"     name="attr_spell_cost">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-quick"    name="attr_spell_quick">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-still"    name="attr_spell_still">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-silent"   name="attr_spell_silent">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-perfects" name="attr_spell_perfects">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-fv"       name="attr_spell_fv">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-fv-mod"   name="attr_spell_fv_mod">0</span>
                  <span class="sheet-spell sheet-table sheet-field sheet-fv-total" name="attr_spell_fv_total">0</span>
                </div>
              </div>
            </fieldset>
          </div>
          <div class="sheet-magic-grid-mana">
            <h2 class="sheet-grid-section-header">Psykepoäng</h2>
            <div class="sheet-mana sheet-table sheet-header sheet-row">
              <div class="sheet-mana sheet-table sheet-field">Max</div>
              <div class="sheet-mana sheet-table sheet-field">Använda</div>
              <div class="sheet-mana sheet-table sheet-field">kvar</div>
            </div>
            <div class="sheet-pair">
              <div class="sheet-mana sheet-table sheet-row sheet-show-while-edit">
                <span  class="sheet-mana sheet-table sheet-field" name="attr_psykePoang_max">0</span>
                <input class="sheet-mana sheet-table sheet-field" name="attr_psykePoangForbrukade" type="number" value="0"/>
                <span  class="sheet-mana sheet-table sheet-field" name="attr_psykePoang">0</span>
              </div>
              <div class="sheet-mana sheet-table sheet-row sheet-hide-while-edit">
                <span class="sheet-mana sheet-table sheet-field" name="attr_psykePoang_max">0</span>
                <span class="sheet-mana sheet-table sheet-field" name="attr_psykePoangForbrukade">0</span>
                <span class="sheet-mana sheet-table sheet-field" name="attr_psykePoang">2</span>
              </div>
            </div>
          </div>
          <div class="sheet-magic-grid-extra">
            <h2 class="sheet-grid-section-header">Övrigt</h2>
            <div class="sheet-extra">
              <textarea name="attr_magic_extra" style="height: 100px"></textarea>
            </div>
          </div>
        </div>
      </li>
      <li name="Strid">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Strid</h1>
        <ul class="sheet-testtab sheet-secondLevelTabs">
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Kroppspoäng</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td class="sheet-box_alternate_row2"><span></span></td>
                    <td class="sheet-box_alternate_row2"><span>FysSto</span></td>
                    <td class="sheet-box_alternate_row2"><span>Mod</span></td>
                    <td class="sheet-box_alternate_row2"><span>KP-tot</span></td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2"><span>Total KP</span></td>
                    <td><input type="number" name="attr_kroppsPoangMod" class="sheet-fardighetstabell" value="0"/></td>
                    <td><input type="number" name="attr_kp_max" class="sheet-fardighetstabell" value="" readonly="true"/></td>
                  </tr>
                </table>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Kroppspoäng och rustning</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td class="sheet-box_alternate_row2"><span></span></td>
                    <td class="sheet-box_alternate_row2"><span>KP-tot</span></td>
                    <td class="sheet-box_alternate_row2"><span>KP</span></td>
                    <td class="sheet-box_alternate_row2"><span>RV</span></td>
                    <td class="sheet-box_alternate_row2"><span>Vikt</span></td>
                    <td class="sheet-box_alternate_row2"><span>Skador</span></td>
                    <td class="sheet-box_alternate_row2"><span>Övrigt</span></td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Huvud</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        readonly="true"
                        name="attr_kphuvud_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kphuvud"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvhuvud"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_vikthuvud"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarhuvud"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigthuvud"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Höger arm</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        readonly="true"
                        name="attr_kphogerarm_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        readonly="true"
                        name="attr_kphogerarm"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvhogerarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_vikthogerarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarhogerarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigthogerarm"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Vänster arm</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        readonly="true"
                        name="attr_kpvansterarm_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kpvansterarm"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvvansterarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_viktvansterarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarvansterarm"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigtvansterarm"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Bröstkorg</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_kpbrost_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kpbrost"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvbrost"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_viktbrost"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarbrost"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigtbrost"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Mage</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_kpmage_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kpmage"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvmage"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_viktmage"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarmage"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigtmage"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Höger ben</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_kphogerben_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kphogerben"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvhogerben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_vikthogerben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarhogerben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigthogerben"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Vänster ben</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_kpvansterben_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kpvansterben"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvvansterben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_viktvansterben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sarvansterben"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigtvansterben"
                      />
                    </td>
                  </tr>
                  <tr></tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>KP skador</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_kpgenerell_max"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kpgenerell"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        value="0"
                        name="attr_rvgenerell"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        step="any"
                        name="attr_viktgenerell"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        value="0"
                        name="attr_sargenerell"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigtgenerell"
                      />
                    </td>
                  </tr>
                  <tr>
                    <td class="sheet-box_alternate_row2">
                      <span>Totalt</span>
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        name="attr_kp_max"
                        readonly="true"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        name="attr_kp"
                        readonly="true"
                        value=""
                      />
                    </td>
                    <td><span></span></td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        disabled="true"
                        name="attr_totviktrustning"
                        value="(@{vikthuvud}+@{vikthogerarm}+@{viktvansterarm}+@{viktbrost}+@{viktmage}+@{vikthogerben}+@{viktvansterben}+@{viktgenerell})"
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="number"
                        min="0"
                        readonly="true"
                        name="attr_sar_totalt"
                        value=""
                      />
                    </td>
                    <td>
                      <input
                        class="sheet-fardighetstabell"
                        type="text"
                        name="attr_ovrigttot"
                      />
                    </td>
                  </tr>
                </table>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab" checked/>
            <h3>Skadebonus</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <tr>
                    <td class="sheet-box_alternate"><span>Normal</span></td>
                    <td class="sheet-box_alternate"><span>Båge</span></td>
                    <td class="sheet-box_alternate"><span>2-hands</span></td>
                  </tr>
                  <tr>
                    <td><input type="text" name="attr_skadeBonus"         class="sheet-fardighetstabell" value="0"/></td>
                    <td><input type="text" name="attr_skadeBonusBage"     class="sheet-fardighetstabell" value="0"/></td>
                    <td><input type="text" name="attr_skadeBonusTvaHand"  class="sheet-fardighetstabell" value="0"/></td>
                  </tr>
                </table>
              </div>
            </div>
          </li>
        </ul>
      </li>
      <li name="Strid2">
        <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-skill-tab" checked/>
        <h1>Strid</h1>
        <div class="sheet-section sheet-grid sheet-combat-grid">
          <div class="sheet-combat-grid-health">
            <h2 class="sheet-grid-section-header">Hälsa</h2>
            <div class="sheet-health sheet-table-header">
              <div class="sheet-table-header-field sheet-health-bodypart">Kroppsdel</div>
              <div class="sheet-table-header-field sheet-health-other">Övrigt</div>
              <div class="sheet-table-header-field sheet-health-max">KP-full</div>
              <div class="sheet-table-header-field sheet-health-current">KP</div>
              <div class="sheet-table-header-field sheet-health-armor">RV</div>
              <div class="sheet-table-header-field sheet-health-wounds">Skada</div>
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Huvud"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kphuvud_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kphuvud"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_head_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarhuvud"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Höger arm"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kphogerarm_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kphogerarm"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_rightarm_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarhogerarm"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Vänster arm"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kpvansterarm_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kpvansterarm"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_leftarm_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarvansterarm"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Bröst"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kpbrost_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kpbrost"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_torso_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarbrost"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Mage"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kpmage_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kpmage"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_stomach_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarmage"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Höger ben"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kphogerben_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kphogerben"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_rightleg_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarhogerben"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Vänster ben"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kpvansterben_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kpvansterben"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"   name="attr_armor_leftleg_sum"  value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sarvansterben"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-row">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="KP skador:"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kpgenerell_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kpgenerell"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"                                   value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sargenerell"        value="0" min="0" />
            </div>
            <div class="sheet-health sheet-table-summary">
              <input class="sheet-table-row-field sheet-health-bodypart"  type="text"   readonly="true"                               value="Totalt:"     />
              <input class="sheet-table-row-field sheet-health-other"     type="text"                                                 value=""         />
              <input class="sheet-table-row-field sheet-health-max"       type="number" readonly="true"   name="attr_kp_max"     value=""          />
              <input class="sheet-table-row-field sheet-health-current"   type="number" readonly="true"   name="attr_kp"         value=""          />
              <input class="sheet-table-row-field sheet-health-armor"     type="number" readonly="true"                                   value=""  min="0" />
              <input class="sheet-table-row-field sheet-health-wounds"    type="number"                   name="attr_sar_totalt"        value="0" min="0" />
            </div>
          </div>
          <div class="sheet-combat-grid-armor">
            <h2 class="sheet-grid-section-header">Rustning</h2>
            <div class="sheet-armor sheet-table-header">
              <div class="sheet-table-header-field sheet-armor-name">Rustning</div>
              <div class="sheet-table-header-field sheet-armor-details">Detaljer</div>
              <div class="sheet-table-header-field sheet-armor-weight">Vikt</div>
              <div class="sheet-table-header-field sheet-armor-head">Huvud</div>
              <div class="sheet-table-header-field sheet-armor-rightArm">H. arm</div>
              <div class="sheet-table-header-field sheet-armor-leftArm">V. arm</div>
              <div class="sheet-table-header-field sheet-armor-torso">Bröst</div>
              <div class="sheet-table-header-field sheet-armor-stomach">Mage</div>
              <div class="sheet-table-header-field sheet-armor-rightLeg">H. ben</div>
              <div class="sheet-table-header-field sheet-armor-leftLeg">V. ben</div>
            </div>
            <fieldset class="repeating_armor">
              <div class="sheet-armor-pair">
                <div class="sheet-armor sheet-table-row sheet-show-while-edit">
                  <input class="sheet-table-row-field sheet-armor-name"       type="text"               name="attr_armor_name"/>
                  <input class="sheet-table-row-field sheet-armor-details"    type="text"               name="attr_armor_details"/>
                  <input class="sheet-table-row-field sheet-armor-weight"     type="number" step="any"  name="attr_armor_weight"   value="0"/>
                  <input class="sheet-table-row-field sheet-armor-head"       type="number" step="any"  name="attr_armor_head"     value="0"/>
                  <input class="sheet-table-row-field sheet-armor-rightArm"   type="number" step="any"  name="attr_armor_rightarm" value="0"/>
                  <input class="sheet-table-row-field sheet-armor-leftArm"    type="number" step="any"  name="attr_armor_leftarm"  value="0"/>
                  <input class="sheet-table-row-field sheet-armor-torso"      type="number" step="any"  name="attr_armor_torso"    value="0"/>
                  <input class="sheet-table-row-field sheet-armor-stomach"    type="number" step="any"  name="attr_armor_stomach"  value="0"/>
                  <input class="sheet-table-row-field sheet-armor-rightLeg"   type="number" step="any"  name="attr_armor_rightleg" value="0"/>
                  <input class="sheet-table-row-field sheet-armor-leftleg"    type="number" step="any"  name="attr_armor_leftleg"  value="0"/>
                </div>
                <div class="sheet-armor sheet-table-row sheet-hide-while-edit">
                  <span class="sheet-table-row-field sheet-armor-name"      name="attr_armor_name"     ></span>
                  <span class="sheet-table-row-field sheet-armor-details"   name="attr_armor_details"  ></span>
                  <span class="sheet-table-row-field sheet-armor-weight"    name="attr_armor_weight"   >0</span>
                  <span class="sheet-table-row-field sheet-armor-head"      name="attr_armor_head"     >0</span>
                  <span class="sheet-table-row-field sheet-armor-rightArm"  name="attr_armor_rightarm" >0</span>
                  <span class="sheet-table-row-field sheet-armor-leftArm"   name="attr_armor_leftarm"  >0</span>
                  <span class="sheet-table-row-field sheet-armor-torso"     name="attr_armor_torso"    >0</span>
                  <span class="sheet-table-row-field sheet-armor-stomach"   name="attr_armor_stomach"  >0</span>
                  <span class="sheet-table-row-field sheet-armor-rightLeg"  name="attr_armor_rightleg" >0</span>
                  <span class="sheet-table-row-field sheet-armor-leftleg"   name="attr_armor_leftleg"  >0</span>
                </div>
              </div>
            </fieldset>
            <div class="sheet-armor sheet-table-summary sheet-hide-while-edit">
              <input class="sheet-table-summary-field sheet-armor-sum"      type="text"               readonly="true"                                value="Totalt:"/>
              <input class="sheet-table-summary-field sheet-armor-details"  type="text"               readonly="true"                                value=""/>
              <input class="sheet-table-summary-field sheet-armor-weight"   type="number"  step="any" readonly="true" name="attr_armor_weight_sum"   value="0"/>
              <input class="sheet-table-summary-field sheet-armor-head"     type="number"  step="any" readonly="true" name="attr_armor_head_sum"     value="0"/>
              <input class="sheet-table-summary-field sheet-armor-rightArm" type="number"  step="any" readonly="true" name="attr_armor_rightarm_sum" value="0"/>
              <input class="sheet-table-summary-field sheet-armor-leftArm"  type="number"  step="any" readonly="true" name="attr_armor_leftarm_sum"  value="0"/>
              <input class="sheet-table-summary-field sheet-armor-torso"    type="number"  step="any" readonly="true" name="attr_armor_torso_sum"    value="0"/>
              <input class="sheet-table-summary-field sheet-armor-stomach"  type="number"  step="any" readonly="true" name="attr_armor_stomach_sum"  value="0"/>
              <input class="sheet-table-summary-field sheet-armor-rightLeg" type="number"  step="any" readonly="true" name="attr_armor_rightleg_sum" value="0"/>
              <input class="sheet-table-summary-field sheet-armor-leftLeg"  type="number"  step="any" readonly="true" name="attr_armor_leftleg_sum"  value="0"/>
            </div>
          </div>
          <div class="sheet-combat-grid-weapon">
            <h2 class="sheet-grid-section-header">Vapen</h2>
            <div class="sheet-vapen-grid">
              <div class="sheet-vapen sheet-table-header sheet-vapen-edit-show">
                <div class="sheet-table-header-field sheet-vapen-namn">Vapen</div>
                <div class="sheet-table-header-field sheet-vapen-skill">Färdighet</div>
                <div class="sheet-table-header-field sheet-vapen-fv">Fv</div>
                <div class="sheet-table-header-field sheet-vapen-fv-mod">Mod</div>
                <div class="sheet-table-header-field sheet-vapen-bv">Bv</div>
                <div class="sheet-table-header-field sheet-vapen-vikt">Vikt</div>
                <div class="sheet-table-header-field sheet-vapen-rv">Rv</div>
                <div class="sheet-table-header-field sheet-vapen-skada">Skada</div>
                <div class="sheet-table-header-field sheet-vapen-skada-mod">Mod</div>
                <div class="sheet-table-header-field sheet-vapen-skada-bonus">Bonus</div>
              </div>
              <div class="sheet-vapen sheet-table-header sheet-vapen-edit-hide">
                <div class="sheet-table-header-field sheet-vapen-namn">Vapen</div>
                <div class="sheet-table-header-field sheet-vapen-skill">Färdighet</div>
                <div class="sheet-table-header-field sheet-vapen-fv">Fv</div>
                <div class="sheet-table-header-field sheet-vapen-fv-mod">Mod</div>
                <div class="sheet-table-header-field sheet-vapen-bv">Bv</div>
                <div class="sheet-table-header-field sheet-vapen-vikt">Vikt</div>
                <div class="sheet-table-header-field sheet-vapen-rv">Rv</div>
                <div class="sheet-table-header-field sheet-vapen-skada">Skada</div>
                <div class="sheet-table-header-field sheet-vapen-skada-mod">Mod</div>
                <div class="sheet-table-header-field sheet-vapen-skada-bonus">Bonus</div>
              </div>
              <fieldset class="repeating_vapen">
                <div class="sheet-vapen-pair">
                  <div class="sheet-vapen sheet-table-row sheet-vapen-edit-show">
                    <input class="sheet-table-row-field sheet-vapen-namn" type="text"   name="attr_vapenNamn"/>
                    <select class="sheet-table-row-field sheet-vapen-skill" type="text"   name="attr_vapenSkill"/>
                      <option value="">Inget</option>
                      <option value="@{Armborst}">Armborst</option>
                      <option value="@{Båge}">Båge</option>
                      <option value="@{Dolk}">Dolk</option>
                      <option value="@{Enhandskrossvapen}">Enhandskrossvapen</option>
                      <option value="@{Enhandssvärd}">Enhandssvärd</option>
                      <option value="@{Enhandsyxa}">Enhandsyxa</option>
                      <option value="@{Kastvapen}">Kastvapen</option>
                      <option value="@{Lans}">Lans</option>
                      <option value="@{Parerdolk}">Parerdolk</option>
                      <option value="@{Sköld}">Sköld</option>
                      <option value="@{Slagsmål}">Slagsmål</option>
                      <option value="@{Slunga}">Slunga</option>
                      <option value="@{Stångvapen}">Stångvapen</option>
                      <option value="@{Tvåhandskrossvapen}">Tvåhandskrossvapen</option>
                      <option value="@{Tvåhandssvärd}">Tvåhandssvärd</option>
                      <option value="@{Tvåhandsyxa}">Tvåhandsyxa</option>
                      <option value="@{Värja}">Värja</option>
                    </select>
                    <input class="sheet-table-row-field sheet-vapen-fv"           type="number" name="attr_vapenFv"         value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-fv-mod"       type="number" name="attr_vapenFvMod"      value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-bv"           type="number" name="attr_vapenBv"         value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-vikt"         type="number" name="attr_vapenVikt"       value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-rv"           type="number" name="attr_vapenRackvidd"   value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-skada"        type="text"   name="attr_vapenSkada"      value="0"/>
                    <input class="sheet-table-row-field sheet-vapen-skada-mod"    type="number" name="attr_vapenSkadaMod"   value="0"/>
                    <select class="sheet-table-row-field sheet-vapen-skada-bonus"               name="attr_vapenSkadaBonus">
                      <option value="@{skadeBonus}">Normal</option>
                      <option value="@{skadeBonusBage}">Båge</option>
                      <option value="@{skadeBonusTvaHand}">2-hands</option>
                    </select>
                  </div>
                  <div class="sheet-vapen sheet-table-row sheet-vapen-edit-hide">
                    <span class="sheet-table-row-field sheet-vapen-namn" name="attr_vapenNamn"></span>
                    <select class="sheet-table-row-field sheet-vapen-skill" type="text"   name="attr_vapenSkill"/>
                          <option value="">Inget</option>
                          <option value="@{Armborst}">Armborst</option>
                          <option value="@{Båge}">Båge</option>
                          <option value="@{Dolk}">Dolk</option>
                          <option value="@{Enhandskrossvapen}">Enhandskrossvapen</option>
                          <option value="@{Enhandssvärd}">Enhandssvärd</option>
                          <option value="@{Enhandsyxa}">Enhandsyxa</option>
                          <option value="@{Kastvapen}">Kastvapen</option>
                          <option value="@{Lans}">Lans</option>
                          <option value="@{Parerdolk}">Parerdolk</option>
                          <option value="@{Sköld}">Sköld</option>
                          <option value="@{Slagsmål}">Slagsmål</option>
                          <option value="@{Slunga}">Slunga</option>
                          <option value="@{Stångvapen}">Stångvapen</option>
                          <option value="@{Tvåhandskrossvapen}">Tvåhandskrossvapen</option>
                          <option value="@{Tvåhandssvärd}">Tvåhandssvärd</option>
                          <option value="@{Tvåhandsyxa}">Tvåhandsyxa</option>
                          <option value="@{Värja}">Värja</option>
                        </select>
                    <span class="sheet-table-row-field sheet-vapen-fv"              name="attr_vapenFv"         value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-fv-mod"          name="attr_vapenFvMod"      value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-bv"              name="attr_vapenBv"         value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-vikt"            name="attr_vapenVikt"       value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-rv"              name="attr_vapenRackvidd"   value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-skada"           name="attr_vapenSkada"      value="0"></span>
                    <span class="sheet-table-row-field sheet-vapen-skada-mod"       name="attr_vapenSkadaMod"   value="0"></span>
                    <select class="sheet-table-row-field sheet-vapen-skada-bonus"   name="attr_vapenSkadaBonus">
                      <option value="@{skadeBonus}">Normal</option>
                      <option value="@{skadeBonusBage}">Båge</option>
                      <option value="@{skadeBonusTvaHand}">2-hands</option>
                    </select>
                    <input  class="sheet-fardighetstabell"   type="hidden" name="attr_vapenRollAttack"       value="{{typ=Attack&amp;#125;&amp;#125; {{skada=[[@{vapenSkada}+@{vapenSkadaMod}+@{vapenSkadaBonus}]]&amp;#125;&amp;#125; {{var=@{vapenRollTraffa}&amp;#125;&amp;#125; {{slag=[[1d20+@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#124;0&amp;#125; ]]&amp;#125;&amp;#125; {{vad=Vapen&amp;#125;&amp;#125; {{perfektslag=[[1t[perfectRoll]]]&amp;#125;&amp;#125; {{fummelslag=[[1t[fumbleRoll]]]&amp;#125;&amp;#125; {{minmax=yes&amp;#125;&amp;#125; {{perfekt=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+20]]&amp;#125;&amp;#125; {{fummel=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+1]]&amp;#125;&amp;#125"/>
                    <input  class="sheet-fardighetstabell"   type="hidden" name="attr_vapenRollTraffa"       value="?{Träfftabell&amp;#124;Standard&amp;#44; [[ 1t[standard]]]&amp;#124;Högt&amp;#44; [[1t[hitHigh]]]&amp;#124;Lågt&amp;#44; [[ 1t[hitLow]]]&amp;#124;Standard - Avstånd&amp;#44; [[ 1t[standardRanged]]]&amp;#124;Högt - Avstånd&amp;#44; [[ 1t[hitHighRanged]]]&amp;#124;Lågt - Avstånd&amp;#44; [[ 1t[hitLowRanged]]]&amp;#125;"/>
                    <input  class="sheet-fardighetstabell"   type="hidden" name="attr_vapenRollSikta"        value="{{typ=Sikta&amp;#125;&amp;#125; {{skada=[[@{vapenSkada}+@{vapenSkadaMod}+@{vapenSkadaBonus}]]&amp;#125;&amp;#125; {{var=@{vapenRollSiktaPlatser}&amp;#125;&amp;#125; {{slag=[[1d20+@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#124;-5&amp;#125; ]]&amp;#125;&amp;#125; {{vad=Vapen&amp;#125;&amp;#125; {{perfektslag=[[1t[perfectRoll]]]&amp;#125;&amp;#125; {{fummelslag=[[1t[fumbleRoll]]];#125;&amp;#125; {{minmax=yes&amp;#125;&amp;#125; {{perfekt=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+20]]&amp;#125;&amp;#125; {{fummel=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+1]]&amp;#125;&amp;#125"/>
                    <input  class="sheet-fardighetstabell"   type="hidden" name="attr_vapenRollSiktaPlatser" value="?{Sikta på&amp;#124;Huvudet&amp;#44; huvudet&amp;#124;Vänster arm&amp;#44; Vänster arm&amp;#124;Höger arm&amp;#44; Höger arm&amp;#124;Bröstkorg&amp;#44; Bröstkorg&amp;#124;Mage&amp;#44; Mage&amp;#124;Vänster ben&amp;#44; Vänster ben&amp;#124;Höger ben&amp;#44; Höger ben&amp;#125;"/>
                    <input  class="sheet-fardighetstabell"   type="hidden" name="attr_vapenRollParrera"      value="{{typ=Parrera&amp;#125;&amp;#125; {{slag=[[1d20+@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#124;0&amp;#125; ]]&amp;#125;&amp;#125; {{vad=Vapen&amp;#125;&amp;#125; {{perfektslag=[[1t[perfectRoll]]]&amp;#125;&amp;#125; {{fummelslag=[[1t[fumbleRoll]]]&amp;#125;&amp;#125; {{minmax=yes&amp;#125;&amp;#125; {{perfekt=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+20]]&amp;#125;&amp;#125; {{fummel=[[@{vapenSkill}+@{vapenFv}+@{vapenFvMod}+?{Modifikation&amp;#125;+1]]&amp;#125;&amp;#125"/>
                    <button class="sheet-button-full-hidden" type="roll"   name="roll_vapen"                 value="&{template:combined} {{name=@{vapenNamn}}} ?{Handling|Attack, @{vapenRollAttack}|Sikta, @{vapenRollSikta}|Parrera, @{vapenRollParrera}}"></button>
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>
      </li>
      <li name="Utrustning">
        <input type="checkbox" class="sheet-testing sheet-firstLevelTab" checked/>
        <h1>Utrustning</h1>
        <ul class="sheet-testtab sheet-secondLevelTabs">
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-allt" checked/>
            <h3>Allt</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" checked/>
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"/>
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål"/>
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"/>
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"/>
                  <table>
                    <tr>
                      <td><input class="sheet-fardighetstabell" type="text"   name="attr_utrustningtyp"   style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text"   name="attr_utrustningbesk"  style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" name="attr_utrustningantal" min="0" value="0" step="any"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" name="attr_utrustningvikt"  min="0" value="0" step="any"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                    </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-klader" checked/>
            <h3>Kläder</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder" checked  />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"          />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-drycker" checked/>
            <h3>Drycker</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder"  />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker" checked        />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"          />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-magiska" checked/>
            <h3>Magiska föremål</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål" checked />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"          />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-egendom" checked/>
            <h3>Egendom</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål"  />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"   checked      />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"          />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-riddjur" checked/>
            <h3>Riddjur</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål"  />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   checked      />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"          />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
          <li>
            <input type="checkbox" class="sheet-testing sheet-secondLevelTab sheet-utrustning-ovrigt" checked/>
            <h3>Övrigt</h3>
            <div class="sheet-body sheet-testtab">
              <div class="sheet-colrow">
                <table>
                  <thead>
                    <tr>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    Value="Typ"         disabled="true" type="text" style="width: 180px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-normal"    value="Beskrivning" disabled="true" type="text" style="width: 425px"  /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Antal"       disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-text-width-slim"      value="Vikt"        disabled="true" type="text" style="width: 45.5px" /></td>
                      <td><input class="sheet-table-header-text sheet-select-width-normal"  value="Kategori"    disabled="true" /></td>    
                    </tr>
                  </thead>
                </table>
                <fieldset class="repeating_utrustning">
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-alla-kategorier" value="Alla kategorier" />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-klader"          value="Kläder"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-drycker"         value="Drycker"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-magiska"         value="Magiska föremål"  />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-egendom"         value="Egendom"         />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-riddjur"         value="Riddjur"   />
                  <input type="radio" name="attr_utrustning_filter" class="sheet-hidden sheet-utrustning-ovrigt"          value="Övrigt"   checked       />
                  <table>
                    <tr class="sheet-filtrerad_utrustning">
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningtyp" style="width: 180px"/></td>
                      <td><input class="sheet-fardighetstabell" type="text" name="attr_utrustningbesk" style="width: 425px"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningantal"/></td>
                      <td><input class="sheet-fardighetstabell" type="number" min="0" value="0" step="any" name="attr_utrustningvikt"/></td>
                      <td>
                        <select name="attr_utrustning_filter" class="sheet-fardighetstabell-select">
                          <option>Alla kategorier</option>
                          <option>Kläder</option>
                          <option>Drycker</option>
                          <option>Magiska föremål</option>
                          <option>Egendom</option>
                          <option>Riddjur</option>
                          <option>Övrigt</option>
                        </select>
                      </td>
                     </tr>
                  </table>
                </fieldset>
              </div>
            </div>
          </li>
        </ul>
      </li>
    </ul>

    <div class="sheet-row">
      <div class="sheet-col sheet-dod-min">Version 0.1</div>
    </div>
  </div>




  <rolltemplate class="sheet-rolltemplate-DoDSummaEllerMotstandGrundegenskap">
    <div class="container">
      <div><h1>Grundegenskap</h1></div>
      {{#slag}}
      <div class="rowcolor"><span class="tcat">Slag: </span>{{ slag }}</div>
      {{/slag}}
      {{#effekt}}
      <div class="rowcolor">
        <span class="tcat">Effektgrad: </span>{{ effekt }}
      </div>
      {{/effekt}}
      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}

      <div class="arrow-container"><div class="line"></div></div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDSummaEllerMotstandMagi">
    <div class="container">
      <div><h1>Magi</h1></div>
      {{#slag}}
      <div class="rowcolor"><span class="tcat">Slag: </span>{{ slag }}</div>
      {{/slag}}
      {{#effekt}}
      <div class="rowcolor">
        <span class="tcat">Effektgrad: </span>{{ effekt }}
      </div>
      {{/effekt}}
      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}

      <div class="arrow-container"><div class="line"></div></div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDSummaEllerMotstandFardighet">
    <div class="container">
      <div><h1>Färdighet</h1></div>
      {{#slag}}
      <div class="rowcolor"><span class="tcat">Slag: </span>{{ slag }}</div>
      {{/slag}}
      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}
      {{#var}}
      <div class="rowcolor"><span class="tcat">var: </span>{{ var }}</div>
      {{/var}}

      <div class="arrow-container"><div class="line"></div></div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDSummaEllerMotstandVapen">
    <div class="container">
      <div><h1>Vapen</h1></div>
      {{#rollTotal() parrering 1}}
      {{#slag}}
      <div class="rowcolor">
        <span class="tcat">Parrering: </span>{{ slag }}
      </div>
      {{/slag}}
      {{/rollTotal() parrering 1}}

      {{#rollTotal() parrering 0}}
      {{#slag}}
      <div class="rowcolor"><span class="tcat">Slag: </span>{{ slag }}</div>
      {{/slag}}
      {{#effekt}}
      <div class="rowcolor">
        <span class="tcat">Effektgrad: </span>{{ effekt }}
      </div>
      {{/effekt}}
      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}
      {{#var}}
      <div class="rowcolor"><span class="tcat">var: </span>{{ var }}</div>
      {{/var}}
      {{/rollTotal() parrering 0}}

      <div class="arrow-container"><div class="line"></div></div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDSummaEllerMotstandVapenTest">
    <div class="container">
      <div><h1>Vapen, test</h1></div>
      {{#typ}}
      <div class="rowcolor"><span class="tcat">typ: </span>{{ typ }}</div>
      {{/typ}}
      {{#slag}}
      <div class="rowcolor"><span class="tcat">Slag: </span>{{ slag }}</div>
      {{/slag}}

      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}
      {{#var}}
      <div class="rowcolor"><span class="tcat">var: </span>{{ var }}</div>
      {{/var}}

      <div class="arrow-container"><div class="line"></div></div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-dropdownTest">
    <div class="container">
      <div class="arrow-container"><div class="line"></div></div>

      {{#typ}}<div><h1>{{typ}}</h1></div>{{/typ}}
      {{^typ}}<div><h1>Handling</h1></div>{{/typ}}
      <table>
        {{#name}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Vapen: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ name }}</span></div></td>
          </tr>
        {{/name}}

        {{#slag}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Rullar: </span></div></td>
            <td><div class="rowcolor">{{ slag }}</div></td>
          </tr>
        {{/slag}}
        
        {{#effekt}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Effektgrad: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ effekt }}</span></div></td>
          </tr>
        {{/effekt}}

        {{#skada}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">skada: </span></div></td>
            <td><div class="rowcolor">{{ skada }}</div></td>
          </tr>
        {{/skada}}

        {{#var}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Träffar: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ var }}</span></div></td>
          </tr>
        {{/var}}

      </table>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-combined">
    <div class="container">
      <div class="arrow-container"><div class="line"></div></div>

      {{#typ}}<div><h1>{{typ}}</h1></div>{{/typ}}
      {{^typ}}<div><h1>Handling</h1></div>{{/typ}}
      <table>
        {{#name}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">{{ vad }}: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ name }}</span></div></td>
          </tr>
        {{/name}}

        {{#slag}}
          {{^minmax}}
            <tr>
              <td><div class="rowcolor"><span class="tcat">Rullar: </span></div></td>
              <td><div class="rowcolor">{{ slag }}</div></td>
            </tr>
          {{/minmax}}
          {{#minmax}}
            <tr>
              <td><div class="rowcolor"><span class="tcat">Rullar: </span></div></td>
              <td><div class="rowcolor">{{ slag }}</div></td>
              <td><div class="rowcolor"></div></td>
            </tr>
            {{#rollTotal() slag perfekt}}
              <tr>
                <td><div class="rowcolor"><span class="tcat">Perfekt: </span></div></td>
                <td><div class="rowcolor sheet-perfekt"><span class="sheet-bold">{{ perfektslag  }}</span></div></td>
              </tr>
            {{/rollTotal() slag perfekt}}
            {{#rollTotal() slag fummel}}
              <tr>
                <td><div class="rowcolor"><span class="tcat">Fummel: </span></div></td>
                <td><div class="rowcolor sheet-fummel"><span class="sheet-bold">{{ fummelslag  }}</span></div></td>
              </tr>
            {{/rollTotal() slag fummel}}
          {{/minmax}}
          {{#conditional}}
            {{#rollGreater() slag -1}}
              <tr>
                <td><div class="rowcolor"><span class="tcat">Slaget: </span></div></td>
                <td><div class="rowcolor"><span class="sheet-bold">Lyckas</span></div></td>
              </tr>
              {{#resultat}}
                <tr>
                  <td><div class="rowcolor"><span class="tcat">{{ resultatLabel }}: </span></div></td>
                  <td><div class="rowcolor"><span class="sheet-bold success">{{ resultat }}</span></div></td>
                </tr>
              {{/resultat}}
            {{/rollGreater() slag -1}}
            {{#rollLess() slag 0}}
              <tr>
                <td><div class="rowcolor"><span class="tcat">Slaget: </span></div></td>
                <td><div class="rowcolor"><span class="sheet-bold failure">Misslyckas</span></div></td>
              </tr>
            {{/rollLess() slag 0}}
          {{/conditional}}
        {{/slag}}
 
        {{#effekt}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Effektgrad: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ effekt }}</span></div></td>
          </tr>
        {{/effekt}}

        {{#skada}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">skada: </span></div></td>
            <td><div class="rowcolor">{{ skada }}</div></td>
          </tr>
        {{/skada}}

        {{#var}}
          <tr>
            <td><div class="rowcolor"><span class="tcat">Träffar: </span></div></td>
            <td><div class="rowcolor"><span class="sheet-bold">{{ var }}</span></div></td>
          </tr>
        {{/var}}

      </table>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDFardighet">
    <div class="container">
      <div><h1>Färdighet</h1></div>
      <div>
        <h1>{{ name }}</h1>
      </div>
      <div>
        <span class="subheader">{{ subtags }}</span>
      </div>
      <div class="arrow-container"><div class="line"></div></div>
      <div class="rowcolor">
        <span class="tcat"></span>{{ slag }} vs {{ fardighet }}
      </div>
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDText">
    <div class="container">
      <div>
        <h1>{{ name }}</h1>
      </div>
      <div>
        <span class="subheader">{{ subtags }}</span>
      </div>
      <div class="arrow-container"><div class="line"></div></div>
      <div class="rowcolor">
        <span class="tcat">{{#titel}}{{ titel }}{{/titel}}</span
        >{{ text }}
      </div>
      {{#text2}}
      <div class="arrow-container"><div class="line"></div></div>
      <div class="rowcolor">
        <span class="tcat">{{#titel2}}{{ titel2 }}{{/titel2}}</span
        >{{ text2 }}
      </div>
      {{/text2}}
    </div>
  </rolltemplate>

  <rolltemplate class="sheet-rolltemplate-DoDAttack">
    <div class="container">
      <div>
        <h1>{{ name }}</h1>
      </div>
      <div>
        <span class="subheader">{{ subtags }}</span>
      </div>
      <div class="arrow-container"><div class="line"></div></div>
      <div class="rowcolor">
        <span class="tcat"></span>{{ slag }} vs {{ fardighet }}
      </div>
      {{#traff}}
      <div class="rowcolor"><span class="tcat">Träff: </span>{{ traff }}</div>
      {{/traff}}
      {{#skada}}
      <div class="rowcolor"><span class="tcat">Skada: </span>{{ skada }}</div>
      {{/skada}}
    </div>
  </rolltemplate>
</div>


<script type="text/worker">
  /* ---- BEGIN: TheAaronSheet.js ---- */
// Github:   https://github.com/shdwjk/TheAaronSheet/blob/master/TheAaronSheet.js
// By:       The Aaron, Arcane Scriptomancer
// Contact:  https://app.roll20.net/users/104025/the-aaron

var TAS = TAS || (function(){
    'use strict';

    var version = '0.2.5',
        lastUpdate = 1504710542,

        loggingSettings = {
            debug: {
                key:     'debug',
                title:   'DEBUG',
                color: {
                    bgLabel: '#7732A2',
                    label:   '#F2EF40',
                    bgText:  '#FFFEB7',
                    text:    '#7732A2'
                }
            },
            error: {
                key:     'error',
                title:   'Error',
                color: {
                    bgLabel: '#C11713',
                    label:   'white',
                    bgText:  '#C11713',
                    text:    'white'
                }
            },
            warn: {
                key:     'warn',
                title:   'Warning',
                color: {
                    bgLabel: '#F29140',
                    label:   'white',
                    bgText:  '#FFD8B7',
                    text:    'black'
                }
            },
            info: {
                key:     'info',
                title:   'Info',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            notice: {
                key:     'notice',
                title:   'Notice',
                color: {
                    bgLabel: '#33C133',
                    label:   'white',
                    bgText:  '#ADF1AD',
                    text:    'black'
                }
            },
            log: {
                key:     'log',
                title:   'Log',
                color: {
                    bgLabel: '#f2f240',
                    label:   'black',
                    bgText:  '#ffff90',
                    text:    'black'
                }
            },
            callstack: {
                key:     'TAS',
                title:   'function',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#B3B2EB',
                    text:    'black'
                }
            },
            callstack_async: {
                key:     'TAS',
                title:   'ASYNC CALL',
                color: {
                    bgLabel: '#413FA9',
                    label:   'white',
                    bgText:  '#413FA9',
                    text:    'white'
                }
            },
            TAS: {
                key:     'TAS',
                title:   'TAS',
                color: {
                    bgLabel: 'grey',
                    label:   'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)',
                    bgText:  'grey',
                    text:    'black;background:linear-gradient(#304352,#d7d2cc,#d7d2cc,#d7d2cc,#304352)'
                }
            }
        },


        config = {
            debugMode: false,
            logging: {
                log: true,
                notice: true,
                info: true,
                warn: true,
                error: true,
                debug: false
            }
        },

        callstackRegistry = [],
		queuedUpdates = {}, //< Used for delaying saves till the last moment.

    complexType = function(o){
        switch(typeof o){
            case 'string':
                return 'string';
            case 'boolean':
                return 'boolean';
            case 'number':
                return (_.isNaN(o) ? 'NaN' : (o.toString().match(/\./) ? 'decimal' : 'integer'));
            case 'function':
                return 'function: '+(o.name ? o.name+'()' : '(anonymous)');
            case 'object':
                return (_.isArray(o) ? 'array' : (_.isArguments(o) ? 'arguments' : ( _.isNull(o) ? 'null' : 'object')));
            default:
                return typeof o;
        }
    },

	dataLogger = function(primaryLogger,secondaryLogger,data){
        _.each(data,function(m){
            var type = complexType(m);
            switch(type){
                case 'string':
                    primaryLogger(m);
                    break;
                case 'undefined':
                case 'null':
                case 'NaN':
                    primaryLogger('['+type+']');
                    break;
                case 'number':
                case 'not a number':
                case 'integer':
                case 'decimal':
                case 'boolean':
                    primaryLogger('['+type+']: '+m);
                    break;
                default:
                    primaryLogger('['+type+']:=========================================');
                    secondaryLogger(m);
                    primaryLogger('=========================================================');
                    break;
            }
        });
	},


    colorLog = function(options){
        var coloredLoggerFunction,
            key = options.key,
            label = options.title || 'TAS',
            lBGColor = (options.color && options.color.bgLabel) || 'blue',
            lTxtColor = (options.color && options.color.label) || 'white',
            mBGColor = (options.color && options.color.bgText) || 'blue',
            mTxtColor = (options.color && options.color.text) || 'white';

        coloredLoggerFunction = function(message){
            /* eslint-disable no-console */
            console.log(
                '%c '+label+': %c '+message + ' ',
                'background-color: '+lBGColor+';color: '+lTxtColor+'; font-weight:bold;',
                'background-color: '+mBGColor+';color: '+mTxtColor+';'
            ); 
            /* eslint-enable no-console */
        };
        return function(){
            if('TAS'===key || config.logging[key]){
                /* eslint-disable no-console */
               dataLogger(coloredLoggerFunction,function(m){console.log(m);},_.toArray(arguments)); 
                /* eslint-enable no-console */
            }
        };
    },

    logDebug  = colorLog(loggingSettings.debug),
    logError  = colorLog(loggingSettings.error),
    logWarn   = colorLog(loggingSettings.warn),
    logInfo   = colorLog(loggingSettings.info),
    logNotice = colorLog(loggingSettings.notice),
    logLog    = colorLog(loggingSettings.log),
    log       = colorLog(loggingSettings.TAS),
    logCS     = colorLog(loggingSettings.callstack),
    logCSA    = colorLog(loggingSettings.callstack_async),

    registerCallstack = function(callstack,label){
        var idx=_.findIndex(callstackRegistry,function(o){
            return (_.difference(o.stack,callstack).length === _.difference(callstack,o.stack).length) &&
                _.difference(o.stack,callstack).length === 0 &&
                o.label === label;
        });
        if(-1 === idx){
            idx=callstackRegistry.length;
            callstackRegistry.push({
                stack: callstack,
                label: label
            });
        }
        return idx;
    },

    setConfigOption = function(options){
        var newconf =_.defaults(options,config);
        newconf.logging=_.defaults(
            (options && options.logging)||{},
            config.logging
        );
        config=newconf;
    },
    
    isDebugMode = function(){
        return config.debugMode;
    },

    debugMode = function(){
        config.logging.debug=true;
        config.debugMode = true;
    },

    getCallstack = function(){
        var e = new Error('dummy'),
            stack = _.map(_.rest(e.stack.replace(/^[^(]+?[\n$]/gm, '')
            .replace(/^\s+at\s+/gm, '')
            .replace(/^Object.<anonymous>\s*\(/gm, '{anonymous}()@')
            .split('\n')),function(l){
                return l.replace(/\s+.*$/,'');
            });
        return stack;
    },
    logCallstackSub = function(cs){
        var matches, csa;
        _.find(cs,function(line){
            matches = line.match(/TAS_CALLSTACK_(\d+)/);
            if(matches){
               csa=callstackRegistry[matches[1]];
               logCSA( '===================='+(csa.label ? '> '+csa.label+' <' : '')+'====================');
               logCallstackSub(csa.stack);
               return true;
            } 
            logCS(line);
            return false;
        });
    },
    logCallstack = function(){
        var cs;
        if(config.debugMode){
            cs = getCallstack();
            cs.shift();
            log('==============================> CALLSTACK <==============================');
            logCallstackSub(cs);
            log('=========================================================================');
        }
    },


    wrapCallback = function (label, callback, context){
        var callstack;
        if('function' === typeof label){
            context=callback;
            callback=label;
            label=undefined;
        }
        if(!config.debugMode){
            return (function(cb,ctx){
                return function(){
                    cb.apply(ctx||{},arguments);
                };
            }(callback,context));
        }
        
        callstack = getCallstack();
        callstack.shift();
        
        return (function(cb,ctx,cs,lbl){
            var ctxref=registerCallstack(cs,lbl);

            /*jshint -W054 */
            return new Function('cb','ctx','TASlog',
                "return function TAS_CALLSTACK_"+ctxref+"(){"+
                    "var start,end;"+
                    "TASlog('Entering: '+(cb.name||'(anonymous function)'));"+
                    "start=_.now();"+
                    "cb.apply(ctx||{},arguments);"+
                    "end=_.now();"+
                    "TASlog('Exiting: '+(cb.name||'(anonymous function)')+' :: '+(end-start)+'ms elapsed');"+
                "};")(cb,ctx,log);
            /*jshint +W054 */
        }(callback,context,callstack,label));
    },


    prepareUpdate = function( attribute, value ){
        queuedUpdates[attribute]=value;
    },

    applyQueuedUpdates = function() {
      setAttrs(queuedUpdates);
      queuedUpdates = {};
    },

	namesFromArgs = function(args,base){
        return _.chain(args)
            .reduce(function(memo,attr){
                if('string' === typeof attr) {
                    memo.push(attr);
                } else if(_.isArray(args) || _.isArguments(args)){
                    memo = namesFromArgs(attr,memo);
                }
                return memo;
            },(_.isArray(base) && base) || [])
            .uniq()
            .value();
	},

	addId = function(obj,value){
		Object.defineProperty(obj,'id',{
			value: value,
			writable: false,
			enumerable: false
		});
	},

	addProp = function(obj,prop,value,fullname){
		(function(){
            var pname=(_.contains(['S','F','I','D'],prop) ? '_'+prop : prop),
                full_pname = fullname || prop,
                pvalue=value;

            _.each(['S','I','F'],function(p){
                if( !_.has(obj,p)){
                    Object.defineProperty(obj, p, {
                        value: {},
                        enumerable: false,
                        readonly: true
                    });
                }
            });
            if( !_.has(obj,'D')){
                Object.defineProperty(obj, 'D', {
                    value: _.reduce(_.range(10),function(m,d){
                            Object.defineProperty(m, d, {
                                value: {},
                                enumerable: true,
                                readonly: true
                            });
                            return m;
                        },{}),
                    enumerable: false,
                    readonly: true
                });
            }


            // Raw value
			Object.defineProperty(obj, pname, {
                enumerable: true,
				set: function(v){
                    if(v!==pvalue) {
                        pvalue=v;
                        prepareUpdate(full_pname,v);
                    }
				},
				get: function(){
					return pvalue;
				}
			});
            
            // string value
			Object.defineProperty(obj.S, pname, {
                enumerable: true,
				set: function(v){
                    var val=v.toString();
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return pvalue.toString();
				}
			});

            // int value
			Object.defineProperty(obj.I, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseInt(v,10) || 0;
                    if(val !== pvalue){
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseInt(pvalue,10) || 0;
				}
			});

            // float value
			Object.defineProperty(obj.F, pname, {
                enumerable: true,
				set: function(v){
                    var val=parseFloat(v) || 0;
                    if(val !== pvalue) {
                        pvalue=val;
                        prepareUpdate(full_pname,val);
                    }
				},
				get: function(){
					return parseFloat(pvalue) || 0;
				}
			});
            _.each(_.range(10),function(d){
                Object.defineProperty(obj.D[d], pname, {
                    enumerable: true,
                    set: function(v){
                        var val=(parseFloat(v) || 0).toFixed(d);
                        if(val !== pvalue){
                            pvalue=val;
                            prepareUpdate(full_pname,val);
                        }
                    },
                    get: function(){
                        return (parseFloat(pvalue) || 0).toFixed(d);
                    }
                });
            });

		}());
	},
	
	repeating = function( section ) {
		return (function(s){
			var sectionName = s,
				attrNames = [],
				fieldNames = [],
				operations = [],
                after = [],
			
			repAttrs = function TAS_Repeating_Attrs(){
				attrNames = namesFromArgs(arguments,attrNames);
				return this;
			},
			repFields = function TAS_Repeating_Fields(){
				fieldNames = namesFromArgs(arguments,fieldNames);
				return this;
			},
			repReduce = function TAS_Repeating_Reduce(func, initial, final, context) { 
				operations.push({
                    type: 'reduce',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    memo: (_.isUndefined(initial) && 0) || initial,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
			repMap = function TAS_Repeating_Map(func, final, context) {
				operations.push({
                    type: 'map',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
			},
            repEach = function TAS_Repeating_Each(func, final, context) {
				operations.push({
                    type: 'each',
                    func: (func && _.isFunction(func) && func) || _.noop,
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repTap = function TAS_Repeating_Tap(final, context) {
				operations.push({
                    type: 'tap',
                    final: (final && _.isFunction(final) && final) || _.noop,
                    context: context || {}
                });
				return this;
            },
            repAfter = function TAS_Repeating_After(callback,context) {
				after.push({
                    callback: (callback && _.isFunction(callback) && callback) || _.noop,
                    context: context || {}
                });
				return this;
            },
			repExecute = function TAS_Repeating_Execute(callback,context){
				var rowSet = {},
					attrSet = {},
					fieldIds = [],
					fullFieldNames = [];

                repAfter(callback,context);

				// call each operation per row.
				// call each operation's final
				getSectionIDs("repeating_"+sectionName,function(ids){
					fieldIds = ids;
					fullFieldNames = _.reduce(fieldIds,function(memo,id){
						return memo.concat(_.map(fieldNames,function(name){
							return 'repeating_'+sectionName+'_'+id+'_'+name;  
						}));
					},[]);
					getAttrs( _.uniq(attrNames.concat(fullFieldNames)), function(values){
						_.each(attrNames,function(aname){
							if(values.hasOwnProperty(aname)){
								addProp(attrSet,aname,values[aname]);
							}
						});

						rowSet = _.reduce(fieldIds,function(memo,id){
							var r={};
							addId(r,id);
							_.each(fieldNames,function(name){
								var fn = 'repeating_'+sectionName+'_'+id+'_'+name;  
								addProp(r,name,values[fn],fn);
							});

							memo[id]=r;

							return memo;
						},{});

                        _.each(operations,function(op){
                            var res;
                            switch(op.type){
                                case 'tap':
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'each':
                                    _.each(rowSet,function(r){
                                        _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,rowSet,attrSet)();
                                    break;

                                case 'map':
                                    res = _.map(rowSet,function(r){
                                        return _.bind(op.func,op.context,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;

                                case 'reduce':
                                    res = op.memo;
                                    _.each(rowSet,function(r){
                                        res = _.bind(op.func,op.context,res,r,attrSet,r.id,rowSet)();
                                    });
                                    _.bind(op.final,op.context,res,rowSet,attrSet)();
                                    break;
                            }
                        });

                        // finalize attrs
                        applyQueuedUpdates();
                        _.each(after,function(op){
                            _.bind(op.callback,op.context)();
                        });
					});
				});
			};
				
			return {
				attrs: repAttrs,
				attr: repAttrs,

				column: repFields,
				columns: repFields,
				field: repFields,
				fields: repFields,

				reduce: repReduce,
				inject: repReduce,
				foldl: repReduce,

				map: repMap,
				collect: repMap,

				each: repEach,
                forEach: repEach,

                tap: repTap,
                'do': repTap,

				after: repAfter,
				last: repAfter,
				done: repAfter,

				execute: repExecute,
				go: repExecute,
				run: repExecute
			};
		}(section));
	},


    repeatingSimpleSum = function(section, field, destination){
        repeating(section)
            .attr(destination)
            .field(field)
            .reduce(function(m,r){
                return m + (r.F[field]);
            },0,function(t,r,a){
                a.S[destination]=t;
            })
            .execute();
    };

    /* eslint-disable no-console */
	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  The Aaron Sheet  v'+version+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
	console.log('%c•.¸¸.•*´¨`*•.¸¸.•*´¨`*•.¸  Last update: '+(new Date(lastUpdate*1000))+'  ¸.•*´¨`*•.¸¸.•*´¨`*•.¸¸.•','background: linear-gradient(to right,green,white,white,green); color:black;text-shadow: 0 0 8px white;');
    /* eslint-enable no-console */


    return {
        /* Repeating Sections */
        repeatingSimpleSum: repeatingSimpleSum,
		repeating: repeating,

        /* Configuration */
        config: setConfigOption,

        /* Debugging */
        callback: wrapCallback,
        callstack: logCallstack,
        debugMode: debugMode,
        isDebugMode: isDebugMode,
        _fn: wrapCallback,

        /* Logging */
        debug: logDebug,
        error: logError,
        warn: logWarn,
        info: logInfo,
        notice: logNotice,
        log: logLog
    };
}());

/* ---- END: TheAaronSheet.js ---- */



  on("change:sty change:stymod sheet:opened", function() {
    getAttrs(["sty", "styMod"], function(values) {
        var number = parseInt(values["sty"],10)||0;
        var modifier = parseInt(values["styMod"],10)||0;
        setAttrs({
            styTot: modifier+number
        });
    });
  });

  on("change:fys change:fysmod sheet:opened", function() {
    getAttrs(["fys", "fysMod"], function(values) {
        var number = parseInt(values["fys"],10)||0;
        var modifier = parseInt(values["fysMod"],10)||0;
        setAttrs({
            fysTot: modifier+number
        });
    });
  });

  on("change:smi change:smimod sheet:opened", function() {
    getAttrs(["smi", "smiMod"], function(values) {
        var number = parseInt(values["smi"],10)||0;
        var modifier = parseInt(values["smiMod"],10)||0;
        setAttrs({
            smiTot: modifier+number
        });
    });
  });

  on("change:int change:intmod sheet:opened", function() {
    getAttrs(["int", "intMod"], function(values) {
        var number = parseInt(values["int"],10)||0;
        var modifier = parseInt(values["intMod"],10)||0;
        setAttrs({
            intTot: modifier+number
        });
    });
  });

  on("change:psy change:psymod sheet:opened", function() {
    getAttrs(["psy", "psyMod"], function(values) {
        var psy = parseInt(values["psy"],10)||0;
        var psyMod = parseInt(values["psyMod"],10)||0;
        setAttrs({
            psyTot: psy+psyMod
        });
    });
  });

  on("change:kar change:karmod sheet:opened", function() {
    getAttrs(["kar", "karMod"], function(values) {
        var number = parseInt(values["kar"],10)||0;
        var modifier = parseInt(values["karMod"],10)||0;
        setAttrs({
            karTot: modifier+number
        });
    });
  });

  on("change:sto change:stomod sheet:opened", function() {
    getAttrs(["sto", "stoMod"], function(values) {
        var number = parseInt(values["sto"],10)||0;
        var modifier = parseInt(values["stoMod"],10)||0;
        setAttrs({
            stoTot: modifier+number
        });
    });
  });

  on("change:stytot change:stotot sheet:opened", function() {
    getAttrs(["styTot", "stoTot"], function(values) {
        var styTot = parseInt(values["styTot"],10)||0;
        var stoTot = parseInt(values["stoTot"],10)||0;
        var sum = styTot+stoTot;
        var sb = "";
        if (sum < 27) {
          sb = "0"
        } else if (sum < 30) {
          sb = "1"
        } else if (sum < 33) {
          sb = "1d2"
        } else if (sum < 41) {
          sb = "1d4"
        } else if (sum < 51) {
          sb = "1d6"
        } else if (sum < 61) {
          sb = "1d8"
        } else if (sum < 71) {
          sb = "1d10"
        } else if (sum < 91) {
          sb = "2t6"
        } else if (sum < 111) {
          sb = "3t6"
        } else if (sum < 141) {
          sb = "4t6"
        } else if (sum < 191) {
          sb = "5t6"
        } else {
          sb = "6t6"
        }
        setAttrs({
            skadeBonus: sb
        });
    });
  });

  on("change:skadebonus change:skadebonusmod sheet:opened", function() {
    getAttrs(["skadeBonus", "skadebonusMod"], function(values) {
        const skadeBonus = values.skadeBonus;
        const skadeBonusMod = values.skadebonusMod;
        let total = "";
        if (skadeBonusMod) {
          total = skadeBonus + "+" + skadeBonusMod
        } else {
          total = skadeBonus
        }
        setAttrs({
            skadeBonusTot: total
        });
    });
  });

  on("change:psytot change:psykepoangmod sheet:opened", function() {
    getAttrs(["psytot", "psykePoangGrund", "psykePoangMod"], function(values) {
        var psykeTotal = parseInt(values["psytot"],10)||0;
        var psykePoangMod = parseInt(values["psykePoangMod"],10)||0;
        setAttrs({
            psykePoangGrund: psykeTotal,
            psykePoang_max: psykeTotal+psykePoangMod
        });
    });
  });

  on("change:psykepoang_max change:psykepoangforbrukade sheet:opened", function() {
    getAttrs(["psykePoang_max", "psykePoangForbrukade"], function(values) {
        var psykePoang_max = parseInt(values["psykePoang_max"],10)||0;
        var psykePoangForbrukade = parseInt(values["psykePoangForbrukade"],10)||0;
        setAttrs({
            psykePoang: psykePoang_max-psykePoangForbrukade
        });
    });
  });

  on("change:fystot change:stotot change:kroppspoangmod sheet:opened", function() {
    getAttrs(["fysTot", "stoTot", "kroppsPoangMod"], function(values) {
        var fysTot = parseInt(values["fysTot"],10)||0;
        var stoTot = parseInt(values["stoTot"],10)||0;
        var kpMod = parseInt(values["kroppsPoangMod"],10)||0;
        setAttrs({
            kroppsPoang: Math.ceil((fysTot+stoTot)/2),
            kp_max: Math.ceil((fysTot+stoTot)/2)+kpMod
        });
    });
  });

  on("change:kp_max sheet:opened", function() {
    getAttrs(["kp_max"], function(values) {
        var kp_max = parseInt(values["kp_max"],10)||0;
        setAttrs({
          kphuvud_max: (Math.ceil(kp_max/2))-2,
          kphogerarm_max: (Math.ceil(kp_max/2))-2,
          kpvansterarm_max: (Math.ceil(kp_max/2))-2,
          kpbrost_max: Math.ceil(kp_max/2),
          kpmage_max: (Math.ceil(kp_max/2))-1,
          kphogerben_max: (Math.ceil(kp_max/2))-1,
          kpvansterben_max: (Math.ceil(kp_max/2))-1,
          kpgenerell_max: kp_max
        });
    });
  });


  on("change:kphuvud_max change:sarhuvud sheet:opened", function() {
    getAttrs(["kphuvud_max", "sarhuvud"], function(values) {
        var kphuvud_max = parseInt(values["kphuvud_max"],10)||0;
        var sarhuvud = parseInt(values["sarhuvud"],10)||0;
        setAttrs({
            kphuvud: kphuvud_max-sarhuvud
        });
    });
  });

  on("change:kpvansterarm_max change:sarvansterarm sheet:opened", function() {
    getAttrs(["kpvansterarm_max", "sarvansterarm"], function(values) {
        var kpvansterarm_max = parseInt(values["kpvansterarm_max"],10)||0;
        var sarvansterarm = parseInt(values["sarvansterarm"],10)||0;
        setAttrs({
          kpvansterarm: kpvansterarm_max-sarvansterarm
        });
    });
  });

  on("change:kphogerarm_max change:sarhogerarm sheet:opened", function() {
    getAttrs(["kphogerarm_max", "sarhogerarm"], function(values) {
        var kphogerarm_max = parseInt(values["kphogerarm_max"],10)||0;
        var sarhogerarm = parseInt(values["sarhogerarm"],10)||0;
        setAttrs({
          kphogerarm: kphogerarm_max-sarhogerarm
        });
    });
  });

  on("change:kpbrost_max change:sarbrost sheet:opened", function() {
    getAttrs(["kpbrost_max", "sarbrost"], function(values) {
        var kpbrost_max = parseInt(values["kpbrost_max"],10)||0;
        var sarbrost = parseInt(values["sarbrost"],10)||0;
        setAttrs({
          kpbrost: kpbrost_max-sarbrost
        });
    });
  });

  on("change:kpmage_max change:sarmage sheet:opened", function() {
    getAttrs(["kpmage_max", "sarmage"], function(values) {
        var kpmage_max = parseInt(values["kpmage_max"],10)||0;
        var sarmage = parseInt(values["sarmage"],10)||0;
        setAttrs({
          kpmage: kpmage_max-sarmage
        });
    });
  });

  on("change:kphogerben_max change:sarhogerben sheet:opened", function() {
    getAttrs(["kphogerben_max", "sarhogerben"], function(values) {
        var kphogerben_max = parseInt(values["kphogerben_max"],10)||0;
        var sarhogerben = parseInt(values["sarhogerben"],10)||0;
        setAttrs({
          kphogerben: kphogerben_max-sarhogerben
        });
    });
  });

  on("change:kpvansterben_max change:sarvansterben sheet:opened", function() {
    getAttrs(["kpvansterben_max", "sarvansterben"], function(values) {
        var kpvansterben_max = parseInt(values["kpvansterben_max"],10)||0;
        var sarvansterben = parseInt(values["sarvansterben"],10)||0;
        setAttrs({
          kpvansterben: kpvansterben_max-sarvansterben
        });
    });
  });

  on("change:kpgenerell_max change:sargenerell sheet:opened", function() {
    getAttrs(["kpgenerell_max", "sargenerell"], function(values) {
        var kpgenerell_max = parseInt(values["kpgenerell_max"],10)||0;
        var sargenerell = parseInt(values["sargenerell"],10)||0;
        setAttrs({
          kpgenerell: kpgenerell_max-sargenerell
        });
    });
  });

  on("change:sarhuvud change:sarvansterarm change:sarhogerarm change:sarbrost change:sarmage change:sarvansterben change:sarhogerben change:sargenerell sheet:opened", function() {
    getAttrs(["sarhuvud", "sarvansterarm", "sarhogerarm", "sarbrost", "sarmage", "sarvansterben", "sarhogerben", "sargenerell"], function(values) {
        var sarhuvud = parseInt(values["sarhuvud"],10)||0;
        var sarvansterarm = parseInt(values["sarvansterarm"],10)||0;
        var sarhogerarm = parseInt(values["sarhogerarm"],10)||0;
        var sarbrost = parseInt(values["sarbrost"],10)||0;
        var sarmage = parseInt(values["sarmage"],10)||0;
        var sarvansterben = parseInt(values["sarvansterben"],10)||0;
        var sarhogerben = parseInt(values["sarhogerben"],10)||0;
        var sargenerell = parseInt(values["sargenerell"],10)||0;
        setAttrs({
          sar_totalt: sarhuvud+sarvansterarm+sarhogerarm+sarbrost+sarmage+sarvansterben+sarhogerben+sargenerell
        });
    });
  });

  on("change:kp_max change:sar_totalt sheet:opened", function() {
    getAttrs(["kp_max", "sar_totalt"], function(values) {
        var kp_max = parseInt(values["kp_max"],10)||0;
        var sar_totalt = parseInt(values["sar_totalt"],10)||0;
        setAttrs({
          kp: kp_max-sar_totalt
        });
    });
  });

  on("change:repeating_yrkes:yrkesmod change:repeating_yrkes:yrkesfv", function() {
    getAttrs(["repeating_yrkes_yrkesmod", "repeating_yrkes_yrkesfv", "repeating_yrkes_yrkesnamn"], function(values) {
      let skillNames = ["Båge", "Armborst", "Kastvapen", "Stångvapen", "Enhandsyxa", "Tvåhandsyxa", "Dolk", "Enhandssvärd", "Tvåhandssvärd", "Enhandskrossvapen", "Tvåhandskrossvapen", "Sköld", "Värja", "Parerdolk", "Lans", "Slunga"]
      if (skillNames.includes(values.repeating_yrkes_yrkesnamn)) {
        let fvMod = parseInt(values.repeating_yrkes_yrkesmod,10)||0;
        let fv = parseInt(values.repeating_yrkes_yrkesfv,10)||0;
        console.log('I listan');
        setAttrs({
          [values.repeating_yrkes_yrkesnamn]: fvMod+fv
        });
      }
      else {
        console.log('Inte i listan');
      }
    });
  });

  on("change:repeating_sekundar:sekundarmod change:repeating_sekundar:sekundarfv", function() {
    getAttrs(["repeating_sekundar_sekundarmod", "repeating_sekundar_sekundarfv", "repeating_sekundar_sekundarnamn"], function(values) {
      let skillNames = ["Båge", "Armborst", "Kastvapen", "Stångvapen", "Enhandsyxa", "Tvåhandsyxa", "Dolk", "Enhandssvärd", "Tvåhandssvärd", "Enhandskrossvapen", "Tvåhandskrossvapen", "Sköld", "Värja", "Parerdolk", "Lans", "Slunga"]
      if (skillNames.includes(values.repeating_sekundar_sekundarnamn)) {
        let fvMod = parseInt(values.repeating_sekundar_sekundarmod,10)||0;
        let fv = parseInt(values.repeating_sekundar_sekundarfv,10)||0;
        console.log('I listan');
        setAttrs({
          [values.repeating_sekundar_sekundarnamn]: fvMod+fv
        });
      }
      else {
        console.log('Inte i listan');
      }
    });
  });

  on("change:slagsmalmod change:slagsmal", function() {
    getAttrs(["slagsmalmod", "slagsmal"], function(values) {
      let fvMod = parseInt(values.slagsmalmod,10)||0;
      let fv = parseInt(values.slagsmal,10)||0;
      setAttrs({
        Slagsmål: fvMod+fv
      });
    });
  });

  on("change:bluffamod change:bluffa change:finnadoldatingmod change:finnadoldating change:forstahjalpenmod change:forstahjalpen change:gommasigmod change:gommasig change:hoppamod change:hoppa change:klattramod change:klattra change:kopslamod change:kopsla change:lyssnamod change:lyssna change:lsmodersmalmodmod change:lsmodersmalmod change:ridamod change:rida change:sjungamod change:sjunga change:slagsmalmod change:slagsmal change:smygamod change:smyga change:sparamod change:spara change:stjalaforemalmod change:stjalaforemal change:talamodersmalmod change:talamodersmal change:upptackafatamod change:upptackafata change:varderamod change:vardera change:overtalamod change:overtala", function() {
    getAttrs(["bluffaMod", "bluffa", "finnaDoldaTingMod", "finnaDoldaTing", "forstaHjalpenMod", "forstaHjalpen", "gommaSigMod", "gommaSig", "hoppaMod", "hoppa", "klattraMod", "klattra", "kopslaMod", "kopsla", "lyssnaMod", "lyssna", "lsModersmalModMod", "lsModersmalMod", "ridaMod", "rida", "sjungaMod", "sjunga", "slagsmalMod", "slagsmal", "smygaMod", "smyga", "sparaMod", "spara", "stjalaForemalMod", "stjalaForemal", "talaModersmalMod", "talaModersmal", "upptackaFaraMod", "upptackaFara", "varderaMod", "vardera", "overtalaMod", "overtala"], function(values) {
      let bluffaMod = parseInt(values.bluffaMod,10)||0;
      let bluffa = parseInt(values.bluffa,10)||0;
      let finnaDoldaTingMod = parseInt(values.finnaDoldaTingMod,10)||0;
      let finnaDoldaTing = parseInt(values.finnaDoldaTing,10)||0;
      let forstaHjalpenMod = parseInt(values.forstaHjalpenMod,10)||0;
      let forstaHjalpen = parseInt(values.forstaHjalpen,10)||0;
      let gommaSigMod = parseInt(values.gommaSigMod,10)||0;
      let gommaSig = parseInt(values.gommaSig,10)||0;
      let hoppaMod = parseInt(values.hoppaMod,10)||0;
      let hoppa = parseInt(values.hoppa,10)||0;
      let klattraMod = parseInt(values.klattraMod,10)||0;
      let klattra = parseInt(values.klattra,10)||0;
      let kopslaMod = parseInt(values.kopslaMod,10)||0;
      let kopsla = parseInt(values.kopsla,10)||0;
      let lyssnaMod = parseInt(values.lyssnaMod,10)||0;
      let lyssna = parseInt(values.lyssna,10)||0;
      let lsModersmalModMod = parseInt(values.lsModersmalModMod,10)||0;
      let lsModersmalMod = parseInt(values.lsModersmalMod,10)||0;
      let ridaMod = parseInt(values.ridaMod,10)||0;
      let rida = parseInt(values.rida,10)||0;
      let sjungaMod = parseInt(values.sjungaMod,10)||0;
      let sjunga = parseInt(values.sjunga,10)||0;
      let slagsmalMod = parseInt(values.slagsmalMod,10)||0;
      let slagsmal = parseInt(values.slagsmal,10)||0;
      let smygaMod = parseInt(values.smygaMod,10)||0;
      let smyga = parseInt(values.smyga,10)||0;
      let sparaMod = parseInt(values.sparaMod,10)||0;
      let spara = parseInt(values.spara,10)||0;
      let stjalaForemalMod = parseInt(values.stjalaForemalMod,10)||0;
      let stjalaForemal = parseInt(values.stjalaForemal,10)||0;
      let talaModersmalMod = parseInt(values.talaModersmalMod,10)||0;
      let talaModersmal = parseInt(values.talaModersmal,10)||0;
      let upptackaFaraMod = parseInt(values.upptackaFaraMod,10)||0;
      let upptackaFara = parseInt(values.upptackaFara,10)||0;
      let varderaMod = parseInt(values.varderaMod,10)||0;
      let vardera = parseInt(values.vardera,10)||0;
      let overtalaMod = parseInt(values.overtalaMod,10)||0;
      let overtala = parseInt(values.overtala,10)||0;
      console.log('Updating Primär skill');
      setAttrs({
        bluffaTotFv: bluffa+bluffaMod,
        finnaDoldaTingTotFv: finnaDoldaTing+finnaDoldaTingMod,
        forstaHjalpenTotFv: forstaHjalpen+forstaHjalpenMod,
        gommaSigTotFv: gommaSig+gommaSigMod,
        hoppaTotFv: hoppa+hoppaMod,
        klattraTotFv: klattra+klattraMod,
        kopslaTotFv: kopsla+kopslaMod,
        lyssnaTotFv: lyssna+lyssnaMod,
        lsModersmalModTotFv: lsModersmalMod+lsModersmalModMod,
        ridaTotFv: rida+ridaMod,
        sjungaTotFv: sjunga+sjungaMod,
        slagsmalTotFv: slagsmal+slagsmalMod,
        smygaTotFv: smyga+smygaMod,
        sparaTotFv: spara+sparaMod,
        stjalaForemalTotFv: stjalaForemal+stjalaForemalMod,
        talaModersmalTotFv: talaModersmal+talaModersmalMod,
        upptackaFaraTotFv: upptackaFara+upptackaFaraMod,
        varderaTotFv: vardera+varderaMod,
        overtalaTotFv: overtala+overtalaMod
      });
    });
  });

  on("change:repeating_yrkes:yrkesmod change:repeating_yrkes:yrkesfv", function() {
    getAttrs(["repeating_yrkes_yrkesmod", "repeating_yrkes_yrkesfv"], function(values) {
      let Mod = parseInt(values.repeating_yrkes_yrkesmod,10)||0;
      let Fv = parseInt(values.repeating_yrkes_yrkesfv,10)||0;
      console.log('Updating Yrkes skill');
      setAttrs({
        repeating_yrkes_yrkestotfv: Fv+Mod
      });
    });
  });

  on("change:repeating_sekundar:sekundarmod change:repeating_sekundar:sekundarfv", function() {
    getAttrs(["repeating_sekundar_sekundarmod", "repeating_sekundar_sekundarfv"], function(values) {
      let Mod = parseInt(values.repeating_sekundar_sekundarmod,10)||0;
      let Fv = parseInt(values.repeating_sekundar_sekundarfv,10)||0;
      console.log('Updating Sekundär skill');
      setAttrs({
        repeating_sekundar_sekundartotfv: Fv+Mod
      });
    });
  });

  on("change:repeating_sprak:sprakmod change:repeating_sprak:sprakfv", function() {
    getAttrs(["repeating_sprak_sprakmod", "repeating_sprak_sprakfv"], function(values) {
      let Mod = parseInt(values.repeating_sprak_sprakmod,10)||0;
      let Fv = parseInt(values.repeating_sprak_sprakfv,10)||0;
      console.log('Updating Språk skill');
      setAttrs({
        repeating_sprak_spraktotfv: Fv+Mod
      });
    });
  });

  on('change:repeating_armor', function(){
    TAS.repeatingSimpleSum('armor','armor_weight','armor_weight_sum');
    TAS.repeatingSimpleSum('armor','armor_head','armor_head_sum');
    TAS.repeatingSimpleSum('armor','armor_rightarm','armor_rightarm_sum');
    TAS.repeatingSimpleSum('armor','armor_leftarm','armor_leftarm_sum');
    TAS.repeatingSimpleSum('armor','armor_torso','armor_torso_sum');
    TAS.repeatingSimpleSum('armor','armor_stomach','armor_stomach_sum');
    TAS.repeatingSimpleSum('armor','armor_rightleg','armor_rightleg_sum');
    TAS.repeatingSimpleSum('armor','armor_leftleg','armor_leftleg_sum');
  });

</script>
